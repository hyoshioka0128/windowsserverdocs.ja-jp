---
title: 応答時間を短縮するための推奨されるバランス電源プランのパラメーター
description: 応答時間を短縮するための推奨されるバランス電源プランのパラメーター
ms.topic: conceptual
ms.author: qizha;tristanb
author: phstee
ms.date: 10/16/2017
ms.openlocfilehash: 4f733eea9ffae00421a58881b7ffc8deeaf7c785
ms.sourcegitcommit: 68444968565667f86ee0586ed4c43da4ab24aaed
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/07/2020
ms.locfileid: "87992279"
---
# <a name="recommended-balanced-power-plan-parameters-for-workloads-requiring-quick-response-times"></a>迅速な応答時間を必要とするワークロードの推奨されるバランスのある電源プランパラメーター

既定の**バランス**の取れた電源プランでは、チューニングのパフォーマンスメトリックとして**スループット**が使用されます。 安定した状態では、システムが完全に過負荷になるまで (約100% の使用率)、**スループット**は変化しません。  その結果、**バランス**の取れた電源プランでは、プロセッサの頻度を最小限に抑え、使用率を最大化することで、電力消費が大幅に優先されます。

ただし、使用率が増加すると、**応答時間**が指数関数的に増加する可能性があります。 今日では、迅速な応答時間の要件が大幅に増加しています。 Microsoft では、迅速な応答時間を必要とする場合に、**高パフォーマンス**の電源プランに切り替えることを推奨していますが、一部のユーザーは、低レベルから中程度の負荷のときに電力の利点を失うことを望んでいません。 そのため、Microsoft では、迅速な応答時間を必要とするワークロードに対して、次の一連の推奨されるパラメーター変更を提供しています。


| パラメーター | 説明 | Default value | 提案された値 |
|------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------|
| プロセッサパフォーマンスの増加しきい値 | 使用率のしきい値。この値を超えると頻度が高くなります。 | 90 | 60 |
| プロセッサパフォーマンスの低下しきい値 | 頻度が減少する使用率のしきい値 | 80 | 40 |
| プロセッサのパフォーマンスの向上時間 | 頻度が増加するまでの PPM チェックウィンドウの数 | 3 | 1 |
| プロセッサパフォーマンスの向上ポリシー | 頻度が増加する速度 | Single | 理想 |

提示された値を設定するために、ユーザーは管理者と共に次のコマンドをウィンドウで実行できます。

``` syntax
Powercfg -setacvalueindex scheme_balanced sub_processor PERFINCTHRESHOLD 60
Powercfg -setacvalueindex scheme_balanced sub_processor PERFDECTHRESHOLD 40
Powercfg -setacvalueindex scheme_balanced sub_processor PERFINCTIME 1
Powercfg -setacvalueindex scheme_balanced sub_processor PERFINCPOL 0
Powercfg -setactive scheme_balanced
```

この変更は、次のワークロードを使用したパフォーマンスと電源のトレードオフの分析に基づいています。 特定の SLA 要件で電力効率をさらに細かく調整する必要があるユーザーには、「[サーバーハードウェアのパフォーマンスに関する考慮事項](../power.md)」を参照してください。

>[!Note]
> 仮想化されたワークロードをチューニングするための電源プランの活用に関するその他の推奨事項と詳細については、「 [hyper-v の構成](../../role/hyper-v-server/configuration.md)

## <a name="specpower--java-workload"></a>SPECpower – JAVA ワークロード

サーバーの電源とパフォーマンスの特性に関して最も一般的な業界標準の仕様ベンチマークである[specpower \_ ssj2008](http://spec.org/power_ssj2008/)が、電力の影響を確認するために使用されます。 **スループット**はパフォーマンスメトリックとしてのみ使用されるため、既定の**バランス**の取れた電源プランによって最適な電力効率が得られます。

提案されたパラメーターの変更では、ライトでの電力消費が若干高くなります (つまり、<は20%)。レベルを読み込みます。 しかし、負荷レベルを上げると、差が大きくなり、60% の負荷レベルを超えた**高パフォーマンス**の電源プランと同じ電力が使用されるようになります。 提案された変更パラメーターを使用するには、ラックの容量計画中の中から高負荷レベルの電力コストをユーザーが認識している必要があります。

## <a name="geekbench-3"></a>GeekBench 3

[GeekBench 3](http://www.geekbench.com/geekbench3/)は、シングルコアおよびマルチコアのパフォーマンスのスコアを分離するクロスプラットフォームプロセッサベンチマークです。 これは、整数のワークロード (暗号化、圧縮、画像処理など)、浮動小数点ワークロード (モデリング、フラクタル、画像のシャープ化、画像のぼかしなど) とメモリワークロード (ストリーミング) を含む一連のワークロードをシミュレートします。

**応答時間**は、スコア計算のメジャーメジャーです。 このテスト対象のシステムでは、**高パフォーマンス**の電源プランと比較して、既定の**バランス**の取れた電源プランはシングルコアテストでは約18%、マルチコアテストでは約40% 回帰になっています。 提案された変更によって、これらの回帰が除去されます。

## <a name="diskspd"></a>DiskSpd

[Diskspd](https://en.wikipedia.org/wiki/Diskspd)は、Microsoft によって開発されたストレージベンチマーク用のコマンドラインツールです。 ストレージシステムに対してさまざまな要求を生成するために広く使用されています。

ここでは、[フェールオーバークラスター] を設定し、Diskspd を使用してランダムおよびシーケンシャルを生成し、IO サイズが異なるローカルおよびリモートのストレージシステムに対して IOs の読み取りと書き込みを行います。 Microsoft のテストでは、IO 応答時間が異なる電源プランのプロセッサ周波数に非常に敏感であることが示されています。 **バランス**の取れた電源プランは、特定のワークロードにおける**高パフォーマンス**の電源プランからの応答時間を倍増させる可能性があります。 提案された変更によって、ほとんどの回帰が除去されます。

>[!Important]
>Windows Server 2016 を実行している Intel [Broadwell] プロセッサ以降では、ワークロードの変更に対するより迅速な適応を実現するために、OS レベルではなくプロセッサでプロセッサの電源管理の決定が行われます。 OS によって使用される従来の PPM パラメーターは、実際の頻度の決定にほとんど影響を与えません。ただし、電力またはパフォーマンスを優先する必要がある場合や、最小周波数と最大周波数を上限する場合を除きます。 そのため、推奨される PPM のパラメーターの変更は、事前 Broadwell システムのみを対象としています。

## <a name="see-also"></a>参照
- [サーバーのハードウェア パフォーマンスに関する考慮事項](../index.md)
- [サーバー ハードウェアの電源に関する考慮事項](../power.md)
- [電源とパフォーマンスのチューニング](power-performance-tuning.md)
- [プロセッサの電源管理チューニング](processor-power-management-tuning.md)
- [フェールオーバークラスター](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc725923(v=ws.10))