---
title: dnscmd
description: DNS サーバーを管理するためのコマンドラインインターフェイスである dnscmd のリファレンストピックです。
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: e7f31cb5-a426-4e25-b714-88712b8defd5
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: e153ab1ed1b8f02f09bf1d8fb4a7842a08c8698b
ms.sourcegitcommit: aed942d11f1a361fc1d17553a4cf190a864d1268
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 05/12/2020
ms.locfileid: "83235199"
---
# <a name="dnscmd"></a>Dnscmd

> 適用対象: Windows Server (半期チャネル)、Windows Server 2019、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

DNS サーバーを管理するためのコマンド ライン インターフェイスです。 このユーティリティは、日常的な DNS 管理タスクを自動化したり、ネットワーク上で新しい DNS サーバーを簡単に無人セットアップおよび構成したりするために、バッチファイルのスクリプトを作成する場合に役立ちます。

## <a name="syntax"></a>構文
```
dnscmd <ServerName> <command> [<command parameters>]
```

### <a name="parameters"></a>パラメーター

|  パラメーター   |     説明      |
|--------------|--------------------------------------------------------------|
| `<ServerName>` | リモートまたはローカルの DNS サーバーの IP アドレスまたはホスト名。 |


## <a name="commands"></a>コマンド

|   command   |     説明      |
| ----------- | -------------------- |
| [dnscmd/ageallrecords](#BKMK_1) | ゾーンまたはノード内のすべてのタイムスタンプの現在の時刻を設定します。 |
| [dnscmd/clearcache](#BKMK_2)  | DNS サーバーのキャッシュを消去します。 |
| [dnscmd/config](#BKMK_3) | DNS サーバーまたはゾーンの構成をリセットします。 |
| [dnscmd/createbuiltindirectorypartitions](#BKMK_4) | 組み込みの DNS アプリケーションディレクトリパーティションを作成します。 |
| [dnscmd/createdirectorypartition](#BKMK_5) | DNS アプリケーション ディレクトリ パーティションを作成します。 |
| [dnscmd/deletedirectorypartition](#BKMK_6) | DNS アプリケーションディレクトリパーティションを削除します。 |
| [dnscmd/directorypartitioninfo](#BKMK_7) | DNS アプリケーションディレクトリパーティションに関する情報を一覧表示します。 |
| [dnscmd/enlistdirectorypartition](#BKMK_8) | Dns アプリケーションディレクトリパーティションのレプリケーションセットに DNS サーバーを追加します。 |
| [dnscmd/enumdirectorypartitions](#BKMK_9) | サーバーの DNS アプリケーションディレクトリパーティションを一覧表示します。 |
| [dnscmd/enumrecords](#BKMK_10) | ゾーン内のリソースレコードを一覧表示します。 |
| [dnscmd/enumzones](#BKMK_11) | 指定したサーバーによってホストされているゾーンを一覧表示します。 |
| [dnscmd/exportsettings](#BKMK_25a) | サーバー構成情報をテキストファイルに書き込みます。 |
| [dnscmd/情報](#BKMK_12) | サーバー情報を取得します。 |
| [dnscmd/ipvalidate](#BKMK_29a) | リモート DNS サーバーを検証します。 |
| [dnscmd/nodedelete](#BKMK_13)  | ゾーン内のノードのすべてのレコードを削除します。 |
| [dnscmd/recordadd](#BKMK_14)  | リソースレコードをゾーンに追加します。 |
| [dnscmd/recorddelete](#BKMK_15) | ゾーンからリソースレコードを削除します。 |
| [dnscmd/resetforwarders](#BKMK_16) | 再帰クエリを転送する DNS サーバーを設定します。 |
| [dnscmd/resetlistenaddresses](#BKMK_17) | DNS 要求を処理するためのサーバー IP アドレスを設定します。 |
| [dnscmd/start清掃](#BKMK_18) | サーバーの清掃を開始します。 |
| [dnscmd/統計](#BKMK_19) | サーバー統計データを照会またはクリアします。 |
| [dnscmd/unenlistdirectorypartition](#BKMK_20) | dns アプリケーションディレクトリパーティションのレプリケーションセットから DNS サーバーを削除します。 |
| [dnscmd/writebackfiles](#BKMK_21) | すべてのゾーンまたはルートヒントデータをファイルに保存します。 |
| [dnscmd/zoneadd](#BKMK_22) | DNS サーバーに新しいゾーンを作成します。 |
| [dnscmd/zonechangedirectorypartition](#BKMK_23) | ゾーンが存在するディレクトリパーティションを変更します。 |
| [dnscmd/zonedelete](#BKMK_24) | DNS サーバーからゾーンを削除します。 |
| [dnscmd/zoneexport](#BKMK_25) | ゾーンのリソースレコードをテキストファイルに書き込みます。 |
| [dnscmd/zoneinfo](#BKMK_26) | ゾーン情報を表示します。 |
| [dnscmd/zonepause](#BKMK_27) | ゾーンを一時停止します。 |
| [dnscmd/zoneprint](#BKMK_28) | ゾーン内のすべてのレコードを表示します。 |
| [dnscmd/zonerefresh](#BKMK_30) | マスターゾーンからセカンダリゾーンを強制的に更新します。 |
| [dnscmd/zonereload](#BKMK_31) | ゾーンをデータベースから再読み込みします。 |
| [dnscmd/zoneresetmasters](#BKMK_32) | ゾーン転送情報を提供するマスタサーバーをセカンダリゾーンに変更します。 |
| [dnscmd/zoneresetscavengeservers](#BKMK_33) | ゾーンを清掃できるサーバーを変更します。 |
| [dnscmd/zoneresetsecondaries](#BKMK_34) | ゾーンのセカンダリ情報をリセットします。 |
| [dnscmd/zoneresettype](#BKMK_29) | ゾーンの種類を変更します。 |
| [dnscmd/zoneresume](#BKMK_35) | ゾーンを再開します。 |
| [dnscmd/zoneupdatefromds](#BKMK_36) | Active directory 統合ゾーンを、active directory ドメインサービス (AD DS) のデータで更新します。 |
| [dnscmd/zonewriteback](#BKMK_37) | ゾーンデータをファイルに保存します。 |

### <a name="dnscmd-ageallrecords"></a><a name=BKMK_1></a>dnscmd/ageallrecords

DNS サーバー上の指定されたゾーンまたはノードにあるリソースレコードについて、タイムスタンプの現在の時刻を設定します。

#### <a name="syntax"></a>構文

```
dnscmd [<ServerName>] /ageallrecords <ZoneName>[<NodeName>] | [/tree]|[/f]
```

##### <a name="parameters"></a>パラメーター

| Partameter | 説明 |
| ---------- | ----------- |
| `<ServerName>` | 管理者が管理を計画している DNS サーバーを指定します。これは、IP アドレス、完全修飾ドメイン名 (FQDN)、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。 |
| `<ZoneName>` | ゾーンの FQDN を指定します。 |
| `<NodeName>` | ゾーン内の特定のノードまたはサブツリーを指定します。 **NodeName**次を使用して、ゾーン内のノードまたはサブツリーを指定します。<p>-@ (ルートゾーンまたは FQDN)<p>-ノードの FQDN (最後にピリオド (.) を含む名前)<p>-ゾーンルートに対して相対的な名前の1つのラベル。 |
| `/tree` | すべての子ノードもタイムスタンプを受け取ることを指定します。 |
| `/f` | 確認を求めずにコマンドを実行します。 |

#### <a name="remarks"></a>Remarks

- **Ageallrecords**コマンドは、現在のバージョンの dns と、エージングと清掃がサポートされていない以前のリリースとの下位互換性を維持するためのものです。 現在の時刻のタイムスタンプをタイムスタンプのないリソースレコードに追加し、タイムスタンプを持つリソースレコードに現在の時刻を設定します。

- レコードにタイムスタンプが付いていない場合、レコードの清掃は行われません。 ネームサーバー (NS) リソースレコード、start of authority (SOA) リソースレコード、および Windows Internet Name Service (WINS) リソースレコードは清掃プロセスに含まれず、 **ageallrecords**コマンドを実行してもタイムスタンプがありません。

- DNS サーバーとゾーンで清掃が有効になっていない場合、このコマンドは失敗します。 ゾーンの清掃を有効にする方法の詳細については、 <a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>config</a>コマンドのゾーンレベルの構文にある**aging**パラメーターを参照してください。<br/>-DNS リソースレコードにタイムスタンプを追加すると、Windows 2000、Windows XP、または Windows Server 2003 以外のオペレーティングシステムで実行されている DNS サーバーとの互換性がなくなります。 **Ageallrecords**コマンドを使用して追加したタイムスタンプを元に戻すことはできません。<br/>-省略可能なパラメーターが指定されていない場合、コマンドは、指定されたノードにあるすべてのリソースレコードを返します。 少なくとも1つの省略可能なパラメーターに値が指定されている場合、 **dnscmd**は、省略可能なパラメーターに指定されている値または値に対応するリソースレコードのみを列挙します。<br/># # # # の例<br/>「<a href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx データ-生のソース =[例 1: タイムスタンプの現在の時刻をリソースレコードに設定する](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)>例 1: タイムスタンプの現在の時刻をリソースレコードに設定する」を参照してください </a> 。<br/>### <a name=BKMK_2></a>dnscmd/clearcache<br/>指定した DNS サーバー上にあるリソースレコードの DNS キャッシュメモリを消去します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /clearcache</code><br/># # # # # パラメーター<br/><ServerName><br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/># # # # 使用状況のサンプル<br/><code>dnscmd dnssvr1.contoso.com /clearcache</code><br/>### <a name=BKMK_3></a>dnscmd/config<br/>DNS サーバーと個々のゾーンのレジストリの値を変更します。 サーバーレベルの設定とゾーンレベルの設定を受け入れます。<br/>&gt; [!CAUTION]<br/>&gt;代替手段がなければ、レジストリを直接編集しないでください。 レジストリエディターでは、標準のセーフガードがバイパスされるため、パフォーマンスを低下させたり、システムに損害を与えたり、Windows の再インストールが必要になることもあります。 ほとんどのレジストリ設定は、コントロールパネルまたは Microsoft 管理コンソール (mmc) のプログラムを使用して、安全に変更できます。 レジストリを直接編集する必要がある場合は、最初にバックアップします。 詳細については、レジストリエディターのヘルプを参照してください。<br/># # # # サーバーレベルの構文<br/><code>dnscmd [&lt;ServerName&gt;] /config &lt;Parameter&gt;</code><br/># # # # dnscmd/config<br/>指定されたサーバーの構成を変更します。<br/># # # # # パラメーター<br/><ServerName><br/>管理を計画している DNS サーバーを指定します。これは、ローカルコンピューターの構文、IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/><Parameter><br/>設定を指定し、オプションとして値を指定します。 パラメーター値には、次の構文を使用します。*パラメーター* [*値*]<br/>次のパラメーター値については、このセクションの残りの部分で説明します。<br/>-   **/addressの制限**<br/>-   **/bindセカンダリ**<br/>-   **/bootmethod**<br/>-   **/defaultagingstate**<br/>-   **/defaultnorefreshinterval**<br/>-   **/defaultrefreshinterval**<br/>-   **/disableautoreversezones**<br/>-   **/disablensrecordsautocreation**<br/>-   **/dspollinginterval**<br/>-   **/dstombstoneinterval**<br/>-   **/ednscachetimeout**<br/>-   **/enablednsプローブ**<br/>-   **/enablednssec**<br/>-   **/enableglobalnamessupport**<br/>-   **/enableglobalqueryblocklist**<br/>-   **/eventloglevel**<br/>-   **/forward委任**<br/>-   **/forwardingtimeout**<br/>-   **/globalnamesqueryorder**<br/>-   **/globalqueryblocklist**<br/>-   **/isスレーブ**<br/>-   **/localnetpriority**<br/>-   **/logfilemaxsize**<br/>-   **/logfilepath**<br/>-   **/logipfilterlist**<br/>-   **/loglevel**<br/>-   **/maxcachesize**<br/>-   **/maxcachettl**<br/>-   **/namecheckflag**<br/>-   **/notcp**<br/>-   **/norecursion**<br/>-   **/recursionretry**<br/>-   **/recursiontimeout**<br/>-   **その他の方法**<br/>-   **/rpcprotocol**<br/>-   **/scavenginginterval**<br/>-   **/secureresponses**<br/>-   **/sendport**<br/>-   **/strictfileparsing**<br/>-   **/updateoptions**<br/>-   **/writeauthorityns**<br/>-   **/xfrconnecttimeout**<br/>**/addressの制限 [0 | 5-28]**<br/>DNS サーバーがクエリに応答して送信できるホストレコードの最大数を指定します。 値はゼロ (0)、または 5 ~ 28 レコードの範囲で指定できます。 既定値は 0 です。<br/>**/bindセカンダリ [0 | 1]**<br/>最大の圧縮と効率を実現できるように、ゾーン転送の形式を変更します。 ただし、この形式は、以前のバージョンのインターネット名ドメイン (BIND) と互換性がありません。<br/>**0**<br/>最大圧縮を使用します。 この形式は、BIND バージョン4.9.4 以降に対してのみ互換性があります。<br/>**1**<br/>Microsoft 以外の DNS サーバーには、メッセージごとに1つのリソースレコードだけを送信します。 この形式は、4.9.4 より前のバージョンのバインドと互換性があります。 これが既定の設定です。<br/>**/bootmethod [0 | 1 | 2 | 3]**<br/>DNS サーバーの構成情報の取得元となるソースを指定します。<br/>**0**<br/>構成情報のソースをクリアします。<br/>**1**<br/>DNS ディレクトリに配置されているバインドファイルから読み込まれます。これは既定で%systemroot%\System32\DNS になっています。<br/>**2**<br/>レジストリから読み込みます。<br/>**3**<br/>AD DS とレジストリから読み込みます。 これが既定の設定です。<br/>**/defaultagingstate [0 | 1]**<br/>新しく作成されたゾーンで DNS 清掃機能が既定で有効になっているかどうかを判断します。<br/>**0**<br/>清掃を無効にします。 これが既定の設定です。<br/>**1**<br/>清掃を有効にします。<br/>**/defaultnorefreshinterval [0x1-0xFFFFFFFF | 0xA8]**<br/>動的に更新されたレコードの更新が受け付けられない期間を設定します。 サーバー上のゾーンは、この値を自動的に継承します。 既定値を変更するには、 **0x1-0xffffffff**の範囲の値を入力します。 サーバーの既定値は**0Xa8**です。<br/>**/defaultrefreshinterval [0x1-0xFFFFFFFF | 0xA8]**<br/>DNS レコードの動的更新で許容される期間を設定します。 サーバー上のゾーンは、この値を自動的に継承します。 既定値を変更するには、 **0x1-0xffffffff**の範囲の値を入力します。 サーバーの既定値は**0Xa8**です。<br/>**/disableautoreversezones [0 | 1]**<br/>逆引き参照ゾーンの自動作成を有効または無効にします。 逆引き参照ゾーンは、DNS ドメイン名に対するインターネットプロトコル (IP) アドレスの解決を提供します。<br/>**0**<br/>逆引き参照ゾーンの自動作成を有効にします。 これが既定の設定です。<br/>**1**<br/>逆引き参照ゾーンの自動作成を無効にします。<br/>**/disablensrecordsautocreation {0 | 1}**<br/>DNS サーバーがホストするゾーンのネームサーバー (NS) リソースレコードを自動的に作成するかどうかを指定します。<br/>**0**<br/>DNS サーバーがホストするゾーンのネームサーバー (NS) リソースレコードが自動的に作成されます。<br/>**1**<br/>では、DNS サーバーがホストするゾーンのネームサーバー (NS) リソースレコードは自動的に作成されません。<br/>**/dspollinginterval 0-30**<br/>Active directory 統合ゾーンの変更に対して、DNS サーバーが AD DS をポーリングする頻度を指定します。<br/>**/dstombstoneinterval [1-30]**<br/>削除されたレコードを AD DS に保持する時間 (秒単位)。<br/>**/ednscachetimeout [ <seconds> ]**<br/>拡張 DNS (EDNS) 情報をキャッシュする秒数を指定します。 最小値は3600、最大値は15724800です。 既定値は604800秒 (1 週間) です。<br/>**/enableednsプローブ {0 | 1}**<br/>他のサーバーをプローブして、EDNS がサポートされているかどうかを確認するサーバーを有効または無効にします。<br/>**0**<br/>EDNS プローブのアクティブなサポートを無効にします。<br/>**1**<br/>EDNS プローブのアクティブなサポートを有効にします。<br/>**/enablednssec {0 | 1}**<br/>DNS セキュリティ拡張機能 (DNSSEC) のサポートを有効または無効にします。<br/>**0**<br/>DNSSEC を無効にします。<br/>**1**<br/>DNSSEC を有効にします。<br/>**/enableglobalnamessupport {0 | 1}**<br/>GlobalNames ゾーンのサポートを有効または無効にします。 GlobalNames ゾーンは、フォレスト全体での単一ラベルの DNS 名の解決をサポートしています。<br/>**0**<br/>GlobalNames ゾーンのサポートを無効にします。 このコマンドの値を**0**に設定すると、DNS サーバーサービスは GlobalNames ゾーン内の単一ラベル名を解決しません。<br/>**1**<br/>GlobalNames ゾーンのサポートを有効にします。 このコマンドの値を**1**に設定すると、DNS サーバーサービスは GlobalNames ゾーン内の単一ラベル名を解決します。<br/>**/enableglobalqueryblocklist {0 | 1}**<br/>リスト内の名前の名前解決をブロックするグローバルクエリブロックリストのサポートを有効または無効にします。 DNS サーバーサービスは、サービスが初めて開始されるときに、既定でグローバルクエリブロックリストを作成し、有効にします。 現在のグローバルクエリブロックの一覧を表示するには、 **dnscmd/info/globalqueryblocklist**コマンドを使用します。<br/>**0**<br/>グローバルクエリブロックリストのサポートを無効にします。 このコマンドの値を**0**に設定すると、DNS サーバーサービスはブロック一覧内の名前に対するクエリに応答します。<br/>**1**<br/>グローバルクエリブロックリストのサポートを有効にします。 このコマンドの値を**1**に設定すると、DNS サーバーサービスはブロック一覧内の名前に対するクエリに応答しません。<br/>**/eventloglevel [0 | 1 | 2 | 4]**<br/>イベントビューアーの DNS サーバーログに記録されるイベントを指定します。<br/>**0**<br/>イベントをログに記録しません。<br/>**1**<br/>エラーのみをログに記録します。<br/>**2**<br/>エラーと警告のみをログに記録します。<br/>**4**<br/>エラー、警告、および情報イベントをログに記録します。 これが既定の設定です。<br/>**/forward委任 [0 | 1]**<br/>DNS サーバーが委任されたサブゾーンのクエリをどのように処理するかを決定します。 これらのクエリは、クエリで参照されているサブゾーン、または DNS サーバーの名前が付けられているフォワーダーの一覧のいずれかに送信できます。 設定のエントリは、転送が有効になっている場合にのみ使用されます。<br/>**0**<br/>は、委任されたサブゾーンを参照するクエリを適切なサブゾーンに自動的に送信します。 これが既定の設定です。<br/>**1**<br/>委任されたサブゾーンを参照するクエリを既存のフォワーダーに転送します。<br/>**/forwardingtimeout [ <seconds> ]**<br/>フォワーダーが応答するのを待ってから、別のフォワーダーを試すまでの DNS サーバーの秒数を指定します。 既定値は**0x5**、5秒です。<br/>**/globalneamesqueryorder** {**0 | 1**}<br/>名前を解決するときに、DNS サーバーサービスが GlobalNames ゾーンまたはローカルゾーンで最初に表示されるかどうかを指定します。<br/>**0**<br/>DNS サーバーサービスは、対象となるゾーンに対してクエリを実行する前に、GlobalNames ゾーンに対してクエリを実行して名前の解決を試みます。<br/>**1**<br/>DNS サーバーサービスは、GlobalNames ゾーンを照会する前に、権限があるゾーンに対してクエリを実行して名前の解決を試みます。<br/>**/globalqueryblocklist [[ <name> <name> ]...]**<br/>現在のグローバルクエリブロックの一覧を、指定した名前の一覧に置き換えます。 名前を指定しない場合、このコマンドはブロック一覧をクリアします。 既定では、グローバルクエリブロックの一覧には次の項目が含まれています。<br/>-isatap<br/>-wpad<br/>DNS サーバーサービスは、既存のゾーンでこれらの名前が見つかった場合、最初に開始したときにこれらの名前のいずれかまたは両方を削除できます。<br/>**/isスレーブ [0 | 1]**<br/>転送されるクエリが応答を受信しない場合に、DNS サーバーがどのように応答するかを決定します。<br/>**0**<br/>DNS サーバーが下位 (*スレーブ*) でないことを指定します。 フォワーダーが応答しない場合、DNS サーバーはクエリ自体の解決を試みます。 これが既定の設定です。<br/>**1**<br/>DNS サーバーが下位のものであることを指定します。 フォワーダーが応答しない場合、DNS サーバーは検索を終了し、エラーメッセージを競合回避モジュールに送信します。<br/>**/localnetpriority [0 | 1]**<br/>DNS サーバーに同じ名前のホストレコードが複数ある場合に、ホストレコードが返される順序を決定します。<br/>**0**<br/>レコードを DNS データベースに一覧表示されている順序で返します。<br/>**1**<br/>最初に類似した IP ネットワークアドレスを持つレコードを返します。 これが既定の設定です。<br/>**/logfilemaxsize [ <size> ]**<br/>Dns .log ファイルの最大サイズ (バイト数-0xFFFFFFFF) を指定します。 ファイルの最大サイズに達すると、DNS は最も古いイベントを上書きします。 既定のサイズは0x400000 で、4メガバイト (MB) です。<br/>**/logfilepath [ &lt; パス + LogFileName &gt; ]**<br/>Dns .log ファイルのパスを指定します。 既定のパスは%systemroot%\System32\Dns\Dns.log. *Path + LogFileName*の形式を使用して、別のパスを指定することもできます。<br/>**/logipfilterlist <IPaddress> [, <IPaddress> ...]**<br/>どのパケットがデバッグログファイルに記録されるかを指定します。 エントリは、IP アドレスの一覧です。 一覧の IP アドレスとの間で送受信されるパケットだけがログに記録されます。<br/>**/loglevel [ <Eventtype> ]**<br/>Dns .log ファイルに記録されるイベントの種類を決定します。 各イベントの種類は、16進数で表されます。 ログに複数のイベントが必要な場合は、16進数の追加を使用して値を追加し、合計を入力します。<br/>**0x0**<br/>DNS サーバーでは、ログは作成されません。 これが既定のエントリです。<br/>**0x10**<br/>クエリをログに記録します。<br/>**0x10**<br/>通知をログに記録します。<br/>**0x20**<br/>更新をログに記録します。<br/>**0xFE**<br/>クエリ以外のトランザクションをログに記録します。<br/>**0x100**<br/>質問トランザクションをログに記録します。<br/>**0x200**<br/>応答をログに記録します。<br/>**0x1000**<br/>ログはパケットを送信します。<br/>**0x2000**<br/>ログはパケットを受信します。<br/>**0x4000**<br/>ユーザーデータグラムプロトコル (UDP) パケットをログに記録します。<br/>**0x8000**<br/>伝送制御プロトコル (TCP) パケットをログに記録します。<br/>**0xFFFF**<br/>すべてのパケットをログに記録します。<br/>**0x10000**<br/>Active directory の書き込みトランザクションをログに記録します。<br/>**0x20000**<br/>Active directory 更新トランザクションをログに記録します。<br/>**0x1000000**<br/>完全なパケットをログに記録します。<br/>**0x80000000**<br/>書き込みトランザクションをログに記録します。<br/>**/maxcachesize**<br/>DNS サーバーのメモリキャッシュの最大サイズをキロバイト (KB) 単位で指定します。<br/>**/maxcachettl [ <seconds> ]**<br/>レコードがキャッシュに保存される秒数 (0x0-0xFFFFFFFF) を決定します。 **0x0**の設定が使用されている場合、DNS サーバーはレコードをキャッシュしません。 既定の設定は、 **0x15180** (86400 秒または1日) です。<br/>**/maxnegativecachettl [ <seconds> ]**<br/>クエリに対する否定応答を記録するエントリが DNS キャッシュに格納されたままになる秒数を指定します (0x1-0xFFFFFFFF)。 既定の設定は**0x384** (900 秒) です。<br/>**/namecheckflag [0 | 1 | 2 | 3]**<br/>DNS 名をチェックするときに使用する文字の標準を指定します。<br/>**0**<br/>は、インターネット技術標準化委員会 (IETF) の Request for Comments (Rfc) に準拠した ANSI 文字を使用します。<br/>**1**<br/>は、必ずしも IETF Rfc に準拠していない ANSI 文字を使用します。<br/>**2**<br/>マルチバイト UCS 変換形式 8 (UTF-8) 文字を使用します。 これが既定の設定です。<br/>**3**<br/>すべての文字を使用します。<br/>**/norecursion [0 | 1]**<br/>DNS サーバーが再帰的な名前解決を実行するかどうかを決定します。<br/>**0**<br/>クエリで要求されている場合、DNS サーバーは再帰的な名前解決を実行します。 これが既定の設定です。<br/>**1**<br/>DNS サーバーは、再帰的な名前解決を実行しません。<br/>**/notcp**<br/>このパラメーターは互換性のために残されていますが、現在のバージョンの Windows Server には影響しません。<br/>**/recursionretry [ <seconds> ]**<br/>DNS サーバーがリモートサーバーへの接続を再試行する前に待機する秒数 (0x1-0xFFFFFFFF) を指定します。 既定の設定は 0x3 (3 秒) です。 この値は、低速のワイドエリアネットワーク (WAN) リンクで再帰が発生した場合に増加する必要があります。<br/>**/recursiontimeout [ <seconds> ]**<br/>DNS サーバーがリモートサーバーへの接続試行を中止するまでに待機する秒数 (0x1-0xFFFFFFFF) を指定します。 設定の範囲は**0x1** ~ **0xffffffff**です。 既定の設定は**0xf です**(15 秒) です。 この値は、低速 WAN リンク経由で再帰が発生した場合に増加する必要があります。<br/>**/入力ビン [0 | 1]**<br/>サーバーに同じ名前のホストレコードが複数ある場合に、ホストレコードが返される順序を決定します。<br/>0<br/>DNS サーバーはラウンドロビンを使用しません。 代わりに、最初のレコードがすべてのクエリに返されます。<br/>**1**<br/>DNS サーバーは、返されたレコードの先頭から、一致するレコードの一覧の一番下までをローテーションします。 これが既定の設定です。<br/>**/rpcprotocol [0x0 | 0x1 | 0x2 | 0x4 | 0xFFFFFFFF]**<br/>リモートプロシージャコール (RPC) が DNS サーバーから接続するときに使用するプロトコルを指定します。<br/>**0x0**<br/>DNS の RPC を無効にします。<br/>**0x1**<br/>TCP/IP を使用します。<br/>**0x2**<br/>名前付きパイプを使用します。<br/>**0x4**<br/>ローカルプロシージャコール (LPC) を使用します。<br/>**~**<br/>すべてのプロトコル。 これが既定の設定です。<br/>**/scavenginginterval [ <hours> ]**<br/>DNS サーバーの清掃機能が有効になっているかどうかを判断し、清掃サイクル間の時間数 (0x0-0xFFFFFFFF) を設定します。 既定の設定は**0x0**で、DNS サーバーの清掃を無効にします。 **0x0**を超える設定では、サーバーの清掃が有効になり、清掃サイクル間の時間数が設定されます。<br/>**/secureresponses [0 | 1]**<br/>DNS がキャッシュに保存されているレコードをフィルター処理するかどうかを指定します。<br/>**0**<br/>名前クエリに対するすべての応答をキャッシュに保存します。 これが既定の設定です。<br/>**1**<br/>同じ DNS サブツリーに属するレコードのみをキャッシュに保存します。<br/>**/sendport [ <port> ]**<br/>再帰クエリを他の DNS サーバーに送信するために DNS が使用するポート番号 (0x0-0xFFFFFFFF) を指定します。 既定の設定は**0x0**です。これは、ポート番号がランダムに選択されることを意味します。<br/>**/serverlevelplugindll [ <Dllpath> ]**<br/>カスタムプラグインのパスを指定します。 *Dllpath*が有効な DNS サーバープラグインの完全修飾パス名を指定すると、dns サーバーはプラグイン内の関数を呼び出して、ローカルにホストされているすべてのゾーンのスコープ外にある名前クエリを解決します。 照会された名前がプラグインのスコープ外の場合、DNS サーバーは、構成どおりに転送または再帰を使用して名前解決を実行します。 *Dllpath*が指定されていない場合、カスタムプラグインが既に構成されている場合、DNS サーバーはカスタムプラグインを使用しなくなります。<br/>**/strictfileparsing [0 | 1]**<br/>ゾーンの読み込み中に誤ったレコードが検出された場合の DNS サーバー&#39;動作を決定します。<br/>**0**<br/>サーバーで間違ったレコードが検出された場合でも、DNS サーバーは引き続きゾーンを読み込みます。 このエラーは、DNS ログに記録されます。 これが既定の設定です。<br/>**1**<br/>DNS サーバーはゾーンの読み込みを停止し、DNS ログにエラーを記録します。<br/>**/updateoptions<RecordValue>**<br/>指定された種類のレコードの動的更新を禁止します。 ログで複数のレコードの種類を禁止する場合は、16進数の追加を使用して値を追加し、合計を入力します。<br/>**0x0**<br/>では、レコードの種類は制限されません。<br/>**0x1**<br/>SOA (start of authority) リソースレコードを除外します。<br/>**0x2**<br/>ネームサーバー (NS) リソースレコードを除外します。<br/>**0x4**<br/>ネームサーバー (NS) リソースレコードの委任を除外します。<br/>**0x8**<br/>サーバーホストレコードを除外します。<br/>**0x100**<br/>セキュリティで保護された動的更新中に、SOA (start of authority) リソースレコードは除外されます。<br/>**0x200**<br/>セキュリティで保護された動的更新中に、ルートネームサーバー (NS) リソースレコードは除外されます。<br/>**0x30F**<br/>標準の動的更新中に、ネームサーバー (NS) リソースレコード、start of authority (SOA) リソースレコード、およびサーバーホストレコードは除外されます。 セキュリティで保護された動的更新中に、ルートネームサーバー (NS) リソースレコードと start of authority (SOA) リソースレコードは除外されます。 委任およびサーバーホストの更新を許可します。<br/>**0x400**<br/>セキュリティで保護された動的更新中に、委任ネームサーバー (NS) リソースレコードを除外します。<br/>**0x800**<br/>セキュリティで保護された動的更新中に、はサーバーホストレコードを除外します。<br/>**0x1000000**<br/>委任署名者 (DS) レコードを除外します。<br/>**0x80000000**<br/>DNS 動的更新を無効にします。<br/>**/writeauthorityns [0 | 1]**<br/>DNS サーバーがネームサーバー (NS) リソースレコードを応答の機関セクションに書き込むタイミングを決定します。<br/>**0**<br/>ネームサーバー (NS) リソースレコードを紹介の Authority セクションに書き込みます。 この設定は、Rfc 1034、ドメイン名の概念と機能、および Rfc 2181 を使用して DNS 仕様に準拠しています。 これが既定の設定です。<br/>**1**<br/>すべての正常な権限のある応答の Authority セクションにネームサーバー (NS) リソースレコードを書き込みます。<br/>**/xfrconnecttimeout [ <seconds> ]**<br/>プライマリ DNS サーバーがセカンダリサーバーからの転送応答を待機する秒数を指定します (0x0-0xFFFFFFFF)。 既定値は**0x1e** (30 秒) です。 タイムアウト値が期限切れになると、接続は終了します。<br/># # # # ゾーンレベルの構文<br/><code>dnscmd /config &lt;Parameters&gt;</code><br/># # # # dnscmd/config<br/>指定されたゾーンの構成を変更します。<br/># # # # # パラメーター<br/>**<Parameters>**<br/>設定、ゾーン名、およびをオプションの値として指定します。 パラメーター値には次の構文を使用します。*ゾーン名パラメーター* [*値*]<br/>次のパラメーター値については、このセクションの残りの部分で説明します。<br/>-   **/aging**<br/>-   **/allownsレコードの自動作成**<br/>-   **/allowupdate**<br/>-   **/forwarderslave**<br/>-   **/forwardertimeout**<br/>-   **/norefreshinterval**<br/>-   **/refreshinterval**<br/>-   **/securesecondaries**<br/>**/aging<ZoneName>**<br/>特定のゾーンでの清掃を有効または無効にします。<br/>**/allownsレコード auto作成 <ZoneName> [ <Value> ]**<br/>DNS サーバー&#39;s ネームサーバー (NS) リソースレコードの自動作成設定を上書きします。 このゾーンに既に登録されているネームサーバー (NS) リソースレコードには影響しません。 そのため、不要になった場合は、手動で削除する必要があります。<br/>**/allowupdate<ZoneName>**<br/>指定されたゾーンが動的更新を受け入れるかどうかを判断します。<br/>**/forwarderslave<ZoneName>**<br/>DNS**サーバーの**設定を上書きします。<br/>**/forwardertimeout<ZoneName>**<br/>フォワーダーが応答するのを DNS ゾーンが待機する秒数を指定します。この秒数が経過すると、別のフォワーダーが試行されます。 この値は、サーバーレベルで設定されている値よりも優先されます。<br/>**/norefreshinterval<ZoneName>**<br/>指定されたゾーンの DNS レコードを動的に更新できないゾーンの時間間隔を設定します。<br/>**/refreshinterval<ZoneName>**<br/>更新によって指定されたゾーンの DNS レコードを動的に更新できるゾーンの時間間隔を設定します。<br/>**/securesecondaries<ZoneName>**<br/>このゾーンのマスタサーバーからゾーンの更新を受け取ることができるセカンダリサーバーを決定します。<br/># # # # 解説<br/>-ゾーン名はゾーンレベルのパラメーターに対してのみ指定する必要があります。<br/>### <a name=BKMK_4></a>dnscmd/createbuiltindirectorypartitions<br/>DNS アプリケーションディレクトリパーティションを作成します。 DNS をインストールすると、サービスのアプリケーションディレクトリパーティションがフォレストレベルとドメインレベルで作成されます。 このコマンドを使用して、削除された、または作成されていない DNS アプリケーションディレクトリパーティションを作成します。 パラメーターを指定しない場合、このコマンドはドメインの組み込みの DNS ディレクトリパーティションを作成します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /createbuiltindirectorypartitions [/forest] [/alldomains]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**/forest**<br/>フォレストの DNS ディレクトリパーティションを作成します。<br/>**/alldomains**<br/>フォレスト内のすべてのドメインに対して DNS パーティションを作成します。<br/>### <a name=BKMK_5></a>dnscmd/createdirectorypartition<br/>DNS アプリケーションディレクトリパーティションを作成します。 DNS をインストールすると、サービスのアプリケーションディレクトリパーティションがフォレストレベルとドメインレベルで作成されます。 この操作では、追加の DNS アプリケーションディレクトリパーティションを作成します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /createdirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<PartitionFQDN>**<br/>作成される DNS アプリケーションディレクトリパーティションの FQDN。<br/>### <a name=BKMK_6></a>dnscmd/deletedirectorypartition<br/>既存の DNS アプリケーションディレクトリパーティションを削除します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /deletedirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<PartitionFQDN>**<br/>削除される DNS アプリケーションディレクトリパーティションの FQDN。<br/>### <a name=BKMK_7></a>dnscmd/directorypartitioninfo<br/>指定された DNS アプリケーションディレクトリパーティションに関する情報を一覧表示します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /directorypartitioninfo &lt;PartitionFQDN&gt; [/detail]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<PartitionFQDN>**<br/>DNS アプリケーションディレクトリパーティションの FQDN。<br/>**/detail**<br/>アプリケーションディレクトリパーティションに関するすべての情報を一覧表示します。<br/>### <a name=BKMK_8></a>dnscmd/enlistdirectorypartition<br/>指定されたディレクトリパーティション&#39;s レプリカセットに DNS サーバーを追加します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /enlistdirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<PartitionFQDN>**<br/>DNS アプリケーションディレクトリパーティションの FQDN。<br/>### <a name=BKMK_9></a>dnscmd/enumdirectorypartitions<br/>指定されたサーバーの DNS アプリケーションディレクトリパーティションを一覧表示します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /enumdirectorypartitions [/custom]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**/カスタム**<br/>ユーザーが作成したディレクトリパーティションのみを一覧表示します。<br/>### <a name=BKMK_10></a>dnscmd/enumrecords<br/>DNS ゾーン内の指定したノードのリソースレコードを一覧表示します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /enumrecords &lt;ZoneName&gt; &lt;NodeName&gt; [/type &lt;RRtype&gt; &lt;Rrdata&gt;] [/authority] [/glue] [/additional] [/node | /child | /startchild&lt;ChildName&gt;] [/continue | /detail]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理を計画している DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**/enumrecords**<br/>指定されたゾーンのリソースレコードを一覧表示します。<br/>**<ZoneName>**<br/>リソースレコードが属しているゾーンの名前を指定します。<br/>**<NodeName>**<br/>リソースレコードのノードの名前を指定します。<br/>**/type <RRtype><Rrdata>**<br/>表示するリソースレコードの種類と、想定されるデータの種類を指定します。<br/>**<RRtype>**<br/>一覧表示するリソースレコードの種類を指定します。<br/>**<Rrdata>**<br/>予想されるレコードの種類を指定します。<br/>**/機関**<br/>権限のあるデータが含まれます。<br/>**/グルー**<br/>グルーデータを含みます。<br/>**/追加**<br/>一覧にあるリソースレコードに関するすべての追加情報が含まれます。<br/>**{/node:(|/child |/startchild <ChildName> }**<br/>リソースレコードの表示に関する情報をフィルター処理または追加します。<br/>**/node:(**<br/>指定されたノードのリソースレコードのみを一覧表示します。<br/>**/child**<br/>指定された子ドメインのリソースレコードのみを一覧表示します。<br/>**/スタート子<ChildName>**<br/>指定された子ドメインのリストを開始します。<br/>**/続行 |/detail**<br/>返されたデータの表示方法を指定します。<br/>**/continue**<br/>リソースレコードとその種類およびデータのみを一覧表示します。<br/>**/detail**<br/>リソースレコードに関するすべての情報を一覧表示します。<br/># # # # 使用状況のサンプル<br/><code>dnscmd /enumrecords test.contoso.com test /additional</code><br/>### <a name=BKMK_11></a>dnscmd/enumzones<br/>指定した DNS サーバー上に存在するゾーンを一覧表示します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /enumzones [/primary | /secondary | /forwarder | /stub | /cache | /auto-created] [/forward | /reverse | /ds | /file] [/domaindirectorypartition | /forestdirectorypartition | /customdirectorypartition | /legacydirectorypartition | /directorypartition &lt;PartitionFQDN&gt;]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**/プライマリ |/セカンダリ |/フォワーダー |/スタブ |/cache |/自動作成**<br/>表示するゾーンの種類をフィルター処理します。<br/>**/primary**<br/>標準プライマリゾーンまたは active directory 統合ゾーンのいずれかであるすべてのゾーンを一覧表示します。<br/>**/secondary**<br/>すべての標準セカンダリゾーンを一覧表示します。<br/>**/フォワーダー**<br/>未解決のクエリを別の DNS サーバーに転送するゾーンを一覧表示します。<br/>**/stub**<br/>すべてのスタブゾーンを一覧表示します。<br/>**/cache**<br/>キャッシュに読み込まれているゾーンのみを一覧表示します。<br/>**/自動作成**<br/>DNS サーバーのインストール中に自動的に作成されたゾーンを一覧表示します。<br/>**/進む |/反転 |/ds |/file**<br/>表示するゾーンの種類の追加フィルターを指定します。<br/>**/転送**<br/>前方参照ゾーンの一覧を表示します。<br/>**/反転**<br/>逆引き参照ゾーンの一覧を表示します。<br/>**/ds**<br/>active directory 統合ゾーンの一覧を表示します。<br/>**/file**<br/>ファイルによってバックアップされているゾーンを一覧表示します。<br/>**/domaindirectorypartition**<br/>ドメインディレクトリパーティションに格納されているゾーンを一覧表示します。<br/>**/forestdirectorypartition**<br/>フォレストの DNS アプリケーションディレクトリパーティションに格納されているゾーンを一覧表示します。<br/>**/customdirectorypartition**<br/>ユーザー定義のアプリケーションディレクトリパーティションに格納されているすべてのゾーンを一覧表示します。<br/>**/legacydirectorypartition**<br/>ドメインディレクトリパーティションに格納されているすべてのゾーンを一覧表示します。<br/>**/directorypartition<PartitionFQDN>**<br/>指定されたディレクトリパーティションに格納されているすべてのゾーンを一覧表示します。<br/># # # # 解説<br/>- **Enumzones**パラメーターは、ゾーンの一覧のフィルターとして機能します。 フィルターが指定されていない場合は、ゾーンの完全な一覧が返されます。 フィルターが指定されている場合、返されたゾーンの一覧には、そのフィルターに適合するゾーンだけが&#39;s 条件に含まれます。<br/># # # # の例<br/>「<a href = データ-生データソース = 例 2: dns サーバーにゾーンの完全な一覧を表示する」を参照してください>例 2: dns サーバーのゾーンの完全な一覧を表示する、 https://technet.microsoft.com/library/cc784399(v=ws.10).aspx [Example 2: Display a complete list of zones on a DNS server](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx) </a> または <a href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx data-raw-source =[example 3:](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx) </a> dns サーバー上のより自動作成ゾーンの一覧を表示する><br/>### <a name=BKMK_25a></a>dnscmd/exportsettings<br/>DNS サーバーの構成の詳細を一覧表示するテキストファイルを作成します。 このテキストファイルの名前は DnsSettings .txt です。 このファイルは、サーバーの%systemroot%\system32\dns ディレクトリにあります。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /exportsettings</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>ローカルコンピューターの構文、IP アドレス、FQDN、またはホスト名で表される、管理対象の DNS サーバーを指定します。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/># # # # 解説<br/>- **Dnscmd/exportsettings**によって作成されたファイル内の情報を使用して、構成の問題をトラブルシューティングしたり、複数のサーバーを同じように構成したりすることができます。<br/>### <a name=BKMK_12></a>dnscmd/情報<br/>指定されたサーバーのレジストリの DNS セクションからの設定を表示します: **HKEY_LOCAL_MACHINE \system\currentcontrolset\services\dns\parameters**<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /info [&lt;Setting&gt;]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<Setting>**<br/>**Info**コマンドによって返される設定は、個別に指定できます。 設定が指定されていない場合は、共通設定のレポートが返されます。<br/># # # # 解説<br/>-このコマンドは、DNS サーバーレベルのレジストリ設定を表示します。 ゾーンレベルのレジストリ設定を表示するには、ゾーン<a href=#BKMK_26 data-raw-source=[zoneinfo](#BKMK_26)>情報</a>コマンドを使用します。 このコマンドで表示できる設定の一覧を表示するには、<a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>構成</a>の説明を参照してください。<br/># # # # の例<br/>「<a href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx データソース =[例 4: dns サーバーから isslave 設定を表示](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)する」を参照してください>例 4: dns サーバー <から isslave 設定を表示する、Dns サーバーから isslave の設定を表示する、例 5: Dns サーバーから Recursiontimeout の設定を表示する </a> https://technet.microsoft.com/library/cc784399(v=ws.10).aspx>例 5: dns[Example 5: Display the Recursiontimeout setting from a DNS server](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx) </a> サーバーからの Recursiontimeout の設定を表示する<br/>### <a name=BKMK_29a></a>dnscmd/ipvalidate<br/>IP アドレスが、機能している DNS サーバーを識別するか、DNS サーバーが特定のゾーンのフォワーダー、ルートヒントサーバー、またはマスターサーバーとして機能するかどうかをテストします。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /ipvalidate &lt;Context&gt; [&lt;ZoneName&gt;] [[&lt;IPaddress&gt;]]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>ローカルコンピューターの構文、IP アドレス、FQDN、またはホスト名で表される、管理対象の DNS サーバーを指定します。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<Context>**<br/>実行するテストの種類を指定します。 次のいずれかのテストを指定できます。<br/>-   **サーバー**は、指定したアドレスを持つコンピューターが DNS サーバーに対して機能しているかどうかをテストします。<br/>-   **/フォワーダー**は、指定されたアドレスがフォワーダーとして機能できる DNS サーバーを識別することをテストします。<br/>-   **/roothints**は、指定されたアドレスがルートヒントネームサーバーとして機能できる DNS サーバーを識別することをテストします。<br/>-   **/zonemasters**は、指定したアドレスが*ゾーンゾーン*のマスターサーバーである DNS サーバーを識別することをテストします。<br/>**<ZoneName>**<br/>ゾーンを識別します。 このパラメーターを **/zonemasters**パラメーターと共に使用します。<br/>**<IPaddress>**<br/>コマンドがテストする IP アドレスを指定します。<br/># # # # 使用状況のサンプル<br/><pre>dnscmd dnssvr1.contoso.com /ipvalidate /dnsservers 10.0.0.1 10.0.0.2
dnscmd dnssvr1.contoso.com /ipvalidate /zonemasters corp.contoso.com 10.0.0.2</pre><br/>### <a name=BKMK_13></a>dnscmd/nodedelete<br/>指定されたホストのすべてのレコードを削除します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /nodedelete &lt;ZoneName&gt; &lt;NodeName&gt; [/tree] [/f]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>ゾーンの名前を指定します。<br/>**<NodeName>**<br/>削除するノードのホスト名を指定します。<br/>**/ツリー**<br/>すべての子レコードを削除します。<br/>**/f**<br/>確認を求めずにコマンドを実行します。<br/># # # # の例<br/>「<a href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx データ-生のソース =[例 6: ノードからレコードを削除](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)する>例 6: ノードからレコードを削除する」を参照してください </a> 。<br/>### <a name=BKMK_14></a>dnscmd/recordadd<br/>DNS サーバーの指定したゾーンにレコードを追加します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /recordadd &lt;ZoneName&gt; &lt;NodeName&gt; &lt;RRtype&gt; &lt;Rrdata&gt;</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>ローカルコンピューターの構文、IP アドレス、FQDN、またはホスト名で表される、管理対象の DNS サーバーを指定します。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>レコードが存在するゾーンを指定します。<br/>**<NodeName>**<br/>ゾーン内の特定のノードを指定します。<br/>**<RRtype>**<br/>追加するレコードの種類を指定します。<br/>**<Rrdata>**<br/>予想されるデータの種類を指定します。<br/>&gt; [!NOTE]<br/>&gt;レコードを追加するときは、正しいデータ型とデータ形式を使用していることを確認してください。 リソースレコードの種類と適切なデータ型の一覧については、「<a href = https://technet.microsoft.com/library/cc758321(v=ws.10).aspx データ-生-ソース =[リソースレコード参照](https://technet.microsoft.com/library/cc758321(v=ws.10).aspx)>リソースレコード参照」を参照してください </a> 。<br/># # # # 使用状況のサンプル<br/><pre>dnscmd dnssvr1.contoso.com /recordadd test A 10.0.0.5
dnscmd /recordadd test.contoso.com test MX 10 mailserver.test.contoso.com</pre><br/>### <a name=BKMK_15></a>dnscmd/recorddelete<br/>指定されたゾーンからリソースレコードを削除します。<br/># # # # 構文<br/><code>dnscmd &lt;ServerName&gt; /recorddelete &lt;ZoneName&gt; &lt;NodeName&gt; &lt;RRtype&gt; &lt;Rrdata&gt;[/f]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>リソースレコードが存在するゾーンを指定します。<br/>**<NodeName>**<br/>ホストの名前を指定します。<br/>**<RRtype>**<br/>削除するリソースレコードの種類を指定します。<br/>**<Rrdata>**<br/>予想されるデータの種類を指定します。<br/>**/f**<br/>確認を求めずにコマンドを実行します。<br/>-ノードは複数のリソースレコードを持つことができるため、このコマンドでは、削除するリソースレコードの種類について非常に固有の情報を要求する必要があります。<br/>-データ型を指定し、リソースレコードデータの種類を指定しない場合、指定したデータ型のすべてのレコードが指定したノードで削除されます。<br/># # # # 使用状況のサンプル<br/><code>dnscmd /recorddelete test.contoso.com test MX 10 mailserver.test.contoso.com</code><br/>### <a name=BKMK_16></a>dnscmd/resetforwarders<br/>DNS サーバーがローカルで解決できない場合に dns サーバーが DNS クエリを転送する IP アドレスを選択またはリセットします。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /resetforwarders [&lt;IPaddress&gt; [,&lt;IPaddress&gt;]...][/timeout &lt;timeOut&gt;] [/slave|/noslave]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<IPaddress>**<br/>DNS サーバーが未解決のクエリを転送する IP アドレスを一覧表示します。<br/>**/timeout<timeOut>**<br/>DNS サーバーがフォワーダーからの応答を待機する秒数を設定します。 既定では、この値は5秒です。<br/>**/スレーブ |/noslave**<br/>フォワーダーがクエリの解決に失敗した場合に、DNS サーバーが独自の反復クエリを実行するかどうかを指定します。<br/>**/slave**<br/>フォワーダーがクエリの解決に失敗した場合に、DNS サーバーが独自の反復クエリを実行しないようにします。<br/>**/noslave**<br/>フォワーダーがクエリの解決に失敗した場合に、DNS サーバーが独自の反復クエリを実行できるようにします。 これが既定の設定です。<br/># # # # 解説<br/>-既定では、クエリを解決できない場合、DNS サーバーは反復クエリを実行します。<br/>- **Resetforwarders**コマンドを使用して IP アドレスを設定すると、dns サーバーは、指定された ip アドレスで dns サーバーに対して再帰的なクエリを実行します。 フォワーダーがクエリを解決しない場合、DNS サーバーは独自の反復クエリを実行できます。<br/>- **/スレーブ**パラメーターが使用されている場合、DNS サーバーは独自の反復クエリを実行しません。 つまり、DNS サーバーは、一覧内の DNS サーバーに対してのみ未解決のクエリを転送します。フォワーダーが解決しない場合、反復クエリは試行されません。 1つの IP アドレスを DNS サーバーのフォワーダーとして設定する方が効率的です。 ネットワーク内の内部サーバーに対して**resetforwarders**コマンドを使用すると、外部接続がある1つの DNS サーバーに未解決のクエリを転送できます。<br/>-フォワーダーの IP アドレスを2回一覧表示すると、DNS サーバーはそのサーバーに2回転送を試みます。<br/># # # # 使用状況のサンプル<br/><pre>dnscmd dnssvr1.contoso.com /resetforwarders 10.0.0.1 /timeout 7 /slave
dnscmd dnssvr1.contoso.com /resetforwarders /noslave</pre><br/>### <a name=BKMK_17></a>dnscmd/resetlistenaddresses<br/>DNS クライアント要求をリッスンするサーバーの IP アドレスを指定します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /resetlistenaddresses [&lt;listenaddress&gt;]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<listenaddress>**<br/>Dns クライアント要求をリッスンする DNS サーバーの IP アドレスを指定します。 リッスンアドレスが指定されていない場合、サーバー上のすべての IP アドレスがクライアント要求をリッスンします。<br/># # # # 解説<br/>-既定では、DNS サーバー上のすべての IP アドレスは、クライアントの DNS 要求をリッスンします。<br/># # # # 使用状況のサンプル<br/><code>dnscmd dnssvr1.contoso.com /resetlistenaddresses 10.0.0.1</code><br/>### <a name=BKMK_18></a>dnscmd/start清掃<br/>指定した DNS サーバーで古いリソースレコードをすぐに検索するように DNS サーバーに指示します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /startscavenging</code><br/># # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/># # # # 解説<br/>-このコマンドが正常に完了すると、すぐに清掃が開始されます。<br/>-清掃を開始するコマンドは正常に完了するように見えますが、次の前提条件が満たされていない限り、清掃は開始されません。<br/>    -サーバーとゾーンの両方で清掃が有効になっています。<br/>    -ゾーンが開始されています。<br/>    -リソースレコードにはタイムスタンプがあります。<br/>-サーバーの清掃を有効にする方法の詳細については、「 <a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>config</a> 」セクションの「サーバーレベルの構文」の**scavenginginterval**パラメーターを参照してください。<br/>-ゾーンの清掃を有効にする方法の詳細については、「 <a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>config</a> 」セクションの「ゾーンレベルの構文」にある**aging**パラメーターを参照してください。<br/>-一時停止されているゾーンを開始する方法の詳細については、「 <a href=#BKMK_35 data-raw-source=[zoneresume](#BKMK_35)>zoneresume</a> 」セクションを参照してください。<br/>-タイムスタンプのリソースレコードを確認する方法の詳細については、「 <a href=#BKMK_1 data-raw-source=[ageallrecords](#BKMK_1)>ageallrecords</a> 」セクションを参照してください。<br/>-清掃に失敗した場合、警告メッセージは表示されません。<br/># # # # 使用状況のサンプル<br/><code>dnscmd dnssvr1.contoso.com /startscavenging</code><br/>### <a name=BKMK_19></a>dnscmd/統計<br/>指定した DNS サーバーのデータを表示またはクリアします。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /statistics [&lt;StatID&gt;] [/clear]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<StatID>**<br/>表示する統計または統計の組み合わせを指定します。 Id 番号は、統計情報を識別するために使用されます。 統計 ID 番号が指定されていない場合は、すべての統計が表示されます。<br/>次に示すのは、指定できる数値と、に表示される対応する統計情報の一覧です。<br/>**00000001**<br/>time<br/>**00000002**<br/>query<br/>**00000004**<br/>query2<br/>**00000008**<br/>Recurse<br/>**00000010**<br/>Master<br/>**00000020**<br/>セカンダリ<br/>**00000040**<br/>WINS<br/>**00000100**<br/>更新<br/>**00000200**<br/>SkwanSec<br/>**00000400**<br/>Ds<br/>**00010000**<br/>メモリ<br/>**00100000**<br/>PacketMem<br/>**00040000**<br/>Dbase<br/>**00080000**<br/>レコード<br/>**00200000**<br/>NbstatMem<br/>**/clear**<br/>指定された統計カウンターを0にリセットします。<br/># # # # 解説<br/>- **Statistics**コマンドを実行すると、DNS サーバーの開始時または再開時に開始されるカウンターが表示されます。<br/># # # # の例<br/>「<a href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx データソース =[例 7: dns](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)サーバーの時間統計を表示する」を参照してください>例 7: dns サーバーの時間の統計情報 </a> を表示する」または <a href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx data-raw-source =[Example 8: dns サーバーの nbstatmem](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx) statistics を表示する>例 8: dns サーバーの nbstatmem 統計を表示する </a><br/>### <a name=BKMK_20></a>dnscmd/unenlistdirectorypartition<br/>指定されたディレクトリパーティション&#39;s レプリカセットから DNS サーバーを削除します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /unenlistdirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<PartitionFQDN>**<br/>削除される DNS アプリケーションディレクトリパーティションの FQDN。<br/>### <a name=BKMK_21></a>dnscmd/writebackfiles<br/>DNS サーバーのメモリが変更されていないかどうかを確認し、永続ストレージに書き込みます。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /writebackfiles [&lt;ZoneName&gt;]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>更新するゾーンの名前を指定します。<br/># # # # 解説<br/>- **Writebackfiles**コマンドは、すべてのダーティゾーンまたは指定されたゾーンを更新します。 永続ストレージにまだ書き込まれていないメモリの変更がある場合、ゾーンはダーティになります。 これは、すべてのゾーンをチェックするサーバーレベルの操作です。 この操作で1つのゾーンを指定することも、ゾーンの<a href=#BKMK_37 data-raw-source=[zonewriteback](#BKMK_37)>書き戻し</a>操作を使用することもできます。<br/># # # # 使用状況のサンプル<br/><code>dnscmd dnssvr1.contoso.com /writebackfiles</code><br/>### <a name=BKMK_22></a>dnscmd/zoneadd<br/>DNS サーバーにゾーンを追加します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /zoneadd &lt;ZoneName&gt; &lt;Zonetype&gt; [/dp &lt;FQDN&gt;| {/domain|/enterprise|/legacy}]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>ゾーンの名前を指定します。<br/>**<Zonetype>**<br/>作成するゾーンの種類を指定します。 各ゾーンの種類には、次のような必須パラメーターがあります。<br/>**/dsprimary**<br/>active directory 統合ゾーンを作成します。<br/>**/プライマリの自動//<FileName>**<br/>標準のプライマリゾーンを作成し、ゾーン情報を格納するファイルの名前を指定します。<br/>**/セカンダリ <MasterIPaddress> [ <MasterIPaddress> ...]**<br/>標準のセカンダリゾーンを作成します。<br/>**/スタブ <MasterIPaddress> [ <MasterIPaddress> ...] の自動入力<FileName>**<br/>ファイルによってサポートされるスタブゾーンを作成します。<br/>**/dsstub <MasterIPaddress> [ <MasterIPaddress> ...]**<br/>active directory 統合スタブゾーンを作成します。<br/>**/フォワーダー <MasterIPaddress> [ <MasterIPaddress> ]...//<FileName>**<br/>作成されたゾーンが未解決のクエリを別の DNS サーバーに転送することを指定します。<br/>**/dsforwarder**<br/>作成した active directory 統合ゾーンが、未解決のクエリを別の DNS サーバーに転送するように指定します。<br/>**/dp <FQDN> {/domain |/enterprise |/legacy}**<br/>ゾーンを格納するディレクトリパーティションを指定します。<br/>**<FQDN>**<br/>ディレクトリパーティションの FQDN を指定します。<br/>**/domain**<br/>ドメインディレクトリパーティションにゾーンを格納します。<br/>**/エンタープライズ**<br/>は、エンタープライズディレクトリパーティションにゾーンを格納します。<br/>**/レガシ**<br/>従来のディレクトリパーティションにゾーンを格納します。<br/># # # # 解説<br/>-ゾーンの種類として **/フォワーダー**または **/dsforwarder**を指定すると、条件付き転送を実行するゾーンが作成されます。<br/># # # # 使用状況のサンプル<br/><pre>dnscmd dnssvr1.contoso.com /zoneadd test.contoso.com /dsprimary
dnscmd dnssvr1.contoso.com /zoneadd secondtest.contoso.com /secondary 10.0.0.2</pre><br/>### <a name=BKMK_23></a>dnscmd/zonechangedirectorypartition<br/>指定されたゾーンが存在するディレクトリパーティションを変更します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /zonechangedirectorypartition &lt;ZoneName&gt;] {[&lt;NewPartitionName&gt;] | [&lt;Zonetype&gt;] }</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>ゾーンが存在する現在のディレクトリパーティションの FQDN。<br/>**<NewPartitionName>**<br/>ゾーンの移動先となるディレクトリパーティションの FQDN。<br/>**<Zonetype>**<br/>ゾーンの移動先となるディレクトリパーティションの種類を指定します。<br/>**/domain**<br/>ゾーンを組み込みのドメインディレクトリパーティションに移動します。<br/>**/forest**<br/>ゾーンを組み込みのフォレストディレクトリパーティションに移動します。<br/>**/レガシ**<br/>active directory ドメインコントローラーの事前に作成されたディレクトリパーティションにゾーンを移動します。 これらのディレクトリパーティションは、ネイティブモードでは不要です。<br/>### <a name=BKMK_24></a>dnscmd/zonedelete<br/>指定されたゾーンを削除します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /zonedelete &lt;ZoneName&gt; [/dsdel] [/f]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>削除するゾーンの名前を指定します。<br/>**/dsdel**<br/>AD DS からゾーンを削除します。<br/>**/f**<br/>確認を求めずにコマンドを実行します。<br/># # # # の例<br/>「<a href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx data-raw-source =[example 9: dns サーバーからゾーンを削除](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)する>例 9: dns サーバーからゾーンを削除する」を参照してください </a> 。<br/>### <a name=BKMK_25></a>dnscmd/zoneexport<br/>指定されたゾーンのリソースレコードを一覧表示するテキストファイルを作成します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /zoneexport &lt;ZoneName&gt; &lt;ZoneExportFile&gt;</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>ローカルコンピューターの構文、IP アドレス、FQDN、またはホスト名で表される、管理対象の DNS サーバーを指定します。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>ゾーンの名前を指定します。<br/>**<ZoneExportFile>**<br/>作成するファイルの名前を指定します。<br/># # # # 解説<br/>-**ゾーンのエクスポート**操作では、トラブルシューティングのために、active directory 統合ゾーンのリソースレコードのファイルを作成します。 既定では、このコマンドによって作成されるファイルは、既定では% systemroot%/System32/Dns ディレクトリにある DNS ディレクトリに配置されます。<br/># # # # の例<br/>「<a href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx データ-生のソース =[例 10: ゾーンリソースレコードの一覧をファイルにエクスポートする](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)>例 10: ゾーンリソースレコードの一覧をファイルにエクスポートする」を参照してください </a> 。<br/>### <a name=BKMK_26></a>dnscmd/zoneinfo<br/>指定されたゾーンのレジストリのセクションからの設定を表示します: **HKEY_LOCAL_MACHINE \System\currentcontrolset\services\dns\parameters\zones \< ZoneName>**<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /zoneinfo &lt;ZoneName&gt;  [&lt;Setting&gt;]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>ゾーンの名前を指定します。<br/>**<Setting>**<br/>**ゾーン情報**コマンドによって返される設定は、個別に指定できます。 設定を指定しない場合は、すべての設定が返されます。<br/># # # # 解説<br/>-ゾーン**情報**コマンドは**HKEY_LOCAL_MACHINE \system\currentcontrolset\services\dns\parameters\zones \< ZoneName>** の DNS ゾーンレベルにあるレジストリ設定を表示します。<br/>-サーバーレベルのレジストリ設定を表示するには、 <a href=#BKMK_12 data-raw-source=[info](#BKMK_12)>info</a>コマンドを使用します。<br/>-このコマンドで表示できる設定の一覧を表示するには、 <a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>config</a>コマンドを参照してください。<br/># # # # の例<br/>「<a href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx data-raw-source =[example 11:](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx) registry から RefreshInterval>設定を表示する」を参照してください。例 11: レジストリから RefreshInterval の設定を表示する、また <はレジストリからの設定を表示する、例 </a> 12: レジストリからエージング設定を表示する https://technet.microsoft.com/library/cc784399(v=ws.10).aspx>例 12:[Example 12: Display Aging setting from the registry](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)レジストリからエージング設定を表示する」を参照してください </a> 。<br/>### <a name=BKMK_27></a>dnscmd/zonepause<br/>指定されたゾーンを一時停止し、クエリ要求を無視します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /zonepause &lt;ZoneName&gt;</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>一時停止するゾーンの名前を指定します。<br/># # # # 解説<br/>-ゾーンを再開し、一時停止した後で使用できるようにするには、 <a href=#BKMK_35 data-raw-source=[zoneresume](#BKMK_35)>zoneresume</a>コマンドを使用します。<br/># # # # 使用状況のサンプル<br/><code>dnscmd dnssvr1.contoso.com /zonepause test.contoso.com</code><br/>### <a name=BKMK_28></a>dnscmd/zoneprint<br/>ゾーン内のレコードを一覧表示します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /zoneprint &lt;ZoneName&gt;</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>ローカルコンピューターの構文、IP アドレス、FQDN、またはホスト名で表される、管理対象の DNS サーバーを指定します。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>一覧表示するゾーンを識別します。<br/>### <a name=BKMK_30></a>dnscmd/zonerefresh<br/>セカンダリ DNS ゾーンを強制的にマスタゾーンから更新します。<br/># # # # 構文<br/><code>dnscmd &lt;ServerName&gt; /zonerefresh &lt;ZoneName&gt;</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>更新するゾーンの名前を指定します。<br/># # # # 解説<br/>- **Zonerefresh**コマンドを実行すると、マスターサーバーの SOA (start of authority) リソースレコードのバージョン番号が強制的にチェックされます。 マスターサーバーのバージョン番号がセカンダリサーバー&#39;のバージョン番号よりも大きい場合は、セカンダリサーバーを更新するゾーン転送が開始されます。 バージョン番号が同じである場合、ゾーン転送は行われません。<br/>-既定では、強制チェックは15分ごとに実行されます。 既定値を変更するには、 **dnscmd config refreshinterval**コマンドを使用します。<br/># # # # 使用状況のサンプル<br/><code>dnscmd dnssvr1.contoso.com /zonerefresh test.contoso.com</code><br/>### <a name=BKMK_31></a>dnscmd/zonereload<br/>ソースからゾーン情報をコピーします。<br/># # # # 構文<br/><code>dnscmd &lt;ServerName&gt; /zonereload &lt;ZoneName&gt;</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>再読み込みするゾーンの名前を指定します。<br/># # # # 解説<br/>-ゾーンが active directory と統合されている場合は、AD DS から再読み込みされます。<br/>-ゾーンが標準のファイルベースのゾーンである場合は、ファイルから再読み込みされます。<br/># # # # 使用状況のサンプル<br/><code>dnscmd dnssvr1.contoso.com /zonereload test.contoso.com</code><br/>### <a name=BKMK_32></a>dnscmd/zoneresetmasters<br/>ゾーン転送情報を提供するマスタサーバーの IP アドレスをセカンダリゾーンにリセットします。<br/># # # # 構文<br/><code>dnscmd &lt;ServerName&gt; /zoneresetmasters &lt;ZoneName&gt; [/local] [&lt;IPaddress&gt; [&lt;IPaddress&gt;]...]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>再読み込みするゾーンの名前を指定します。<br/>**/local**<br/>ローカルのマスターリストを設定します。 このパラメーターは、active directory 統合ゾーンで使用されます。<br/>**<IPaddress>**<br/>セカンダリゾーンのマスタサーバーの IP アドレス。<br/># # # # 解説<br/>-この値は、最初にセカンダリゾーンが作成されるときに設定されます。 セカンダリサーバーで、**ゾーンの eresetmasters**コマンドを使用します。 この値は、マスター DNS サーバーで設定されている場合は効果がありません。<br/># # # # 使用状況のサンプル<br/><pre>dnscmd dnssvr1.contoso.com /zoneresetmasters test.contoso.com 10.0.0.1
dnscmd dnssvr1.contoso.com /zoneresetmasters test.contoso.com /local</pre><br/>### <a name=BKMK_33></a>dnscmd/zoneresetscavengeservers<br/>指定されたゾーンを清掃できるサーバーの IP アドレスを変更します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /zoneresetscavengeservers &lt;ZoneName&gt; [&lt;IPaddress&gt; [&lt;IPaddress&gt;]...]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>ローカルコンピューターの構文、IP アドレス、FQDN、またはホスト名で表される、管理対象の DNS サーバーを指定します。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>清掃するゾーンを識別します。<br/>**<IPaddress>**<br/>清掃を実行できるサーバーの IP アドレスが一覧表示されます。 このパラメーターを省略した場合、このゾーンをホストするすべてのサーバーで清掃を実行できます。<br/># # # # 解説<br/>-既定では、ゾーンをホストするすべてのサーバーがそのゾーンを清掃できます。<br/>-1 つのゾーンが複数の DNS サーバーでホストされている場合、このコマンドを使用して、ゾーンを清掃する回数を減らすことができます。<br/>-このコマンドの影響を受ける DNS サーバーとゾーンで清掃を有効にする必要があります。<br/># # # # 使用状況のサンプル<br/><code>dnscmd dnssvr1.contoso.com /zoneresetscavengeservers test.contoso.com 10.0.0.1 10.0.0.2</code><br/>### <a name=BKMK_34></a>dnscmd/zoneresetsecondaries<br/>ゾーン転送が要求されたときにマスターサーバーが応答するセカンダリサーバーの IP アドレスの一覧を指定します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /zoneresetsecondaries &lt;ZoneName&gt; {/noxfr | /nonsecure | /securens | /securelist &lt;SecurityIPaddresses&gt;} {/nonotify | /notify | /notifylist &lt;NotifyIPaddresses&gt;}</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 Is パラメーターを省略すると、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>セカンダリサーバーをリセットするゾーンの名前を指定します。<br/>**/noxfr |/非セキュリティ |/セキュリティー |/securelist<SecurityIPaddresses>**<br/>更新を要求しているセカンダリサーバーの一部またはすべてが更新プログラムを取得するかどうかを指定します。<br/>**/noxfr**<br/>ゾーン転送を許可しないことを指定します。<br/>**/非セキュリティ**<br/>すべてのゾーン転送要求を許可することを指定します。<br/>**/セキュリティー**<br/>ゾーンのネームサーバー (NS) リソースレコードに一覧表示されているサーバーにのみ転送を許可することを指定します。<br/>**/securelist**<br/>ゾーン転送をサーバーの一覧のみに許可することを指定します。 このパラメーターの後には、マスターサーバーが使用する IP アドレスまたはアドレスを指定する必要があります。<br/>**<SecurityIPaddresses>**<br/>マスターサーバーからゾーン転送を受信する IP アドレスを一覧表示します。 このパラメーターは、 **/dns リスト**パラメーターと共にのみ使用されます。<br/>**/nonotify |/通知 |/notifylist<NotifyIPaddresses>**<br/>変更通知が特定のセカンダリサーバーにのみ送信されることを指定します。<br/>**/nonotify**<br/>変更通知がセカンダリサーバーに送信されないことを指定します。<br/>**/通知**<br/>変更通知をすべてのセカンダリサーバーに送信することを指定します。<br/>**/notifylist**<br/>変更通知をサーバーの一覧のみに送信することを指定します。 このコマンドの後には、マスターサーバーが使用する IP アドレスまたはアドレスを指定する必要があります。<br/>**<NotifyIPaddresses>**<br/>変更通知の送信先となるセカンダリサーバーの IP アドレスまたはアドレスを指定します。 この一覧は、 **/notifylist**パラメーターと共にのみ使用されます。<br/># # # # 解説<br/>-セカンダリサーバーからのゾーン転送要求に対する応答方法を指定するには、マスターサーバーでゾーンの**eresetsecondary**コマンドを使用します。<br/># # # # 使用状況のサンプル<br/><pre>dnscmd dnssvr1.contoso.com /zoneresetsecondaries test.contoso.com /noxfr /nonotify
dnscmd dnssvr1.contoso.com /zoneresetsecondaries test.contoso.com /securelist 11.0.0.2</pre><br/>### <a name=BKMK_29></a>dnscmd/zoneresettype<br/>ゾーンの種類を変更します。<br/># # # # 構文<br/><code>dnscmd [&lt;ServerName&gt;] /zoneresettype &lt;ZoneName&gt; &lt;Zonetype&gt; [/overwrite_mem | /overwrite_ds]</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>ローカルコンピューターの構文、IP アドレス、FQDN、またはホスト名で表される、管理対象の DNS サーバーを指定します。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>型が変更されるゾーンを識別します。<br/>**<Zonetype>**<br/>作成するゾーンの種類を指定します。 各型には、異なる必須パラメーターがあります。<br/>**/dsprimary**<br/>active directory 統合ゾーンを作成します。<br/>**/プライマリの自動//<FileName>**<br/>標準プライマリゾーンを作成します。<br/>**/セカンダリ <MasterIPaddress> [, <MasterIPaddress> ...]**<br/>標準のセカンダリゾーンを作成します。<br/>**/スタブ <MasterIPaddress> [, <MasterIPaddress> ...] の自動入力<FileName>**<br/>ファイルによってサポートされるスタブゾーンを作成します。<br/>**/dsstub <MasterIPaddress> [, <MasterIPaddress> ...]**<br/>active directory 統合スタブゾーンを作成します。<br/>**/フォワーダー &lt; masteripaddress [, <MasterIPaddress> ]... の場合<FileName>**<br/>作成されたゾーンが未解決のクエリを別の DNS サーバーに転送することを指定します。<br/>**/dsforwarder**<br/>作成した active directory 統合ゾーンが、未解決のクエリを別の DNS サーバーに転送するように指定します。<br/>**/overwrite_mem |/overwrite_ds**<br/>既存のデータを上書きする方法を指定します。<br/>**/overwrite_mem**<br/>AD DS のデータの DNS データを上書きします。<br/>**/overwrite_ds**<br/>AD DS 内の既存のデータを上書きします。<br/># # # # 解説<br/>-ゾーンの種類を **/dsforwarder**として設定すると、条件付きの転送を実行するゾーンが作成されます。<br/># # # # 使用状況のサンプル<br/><pre>dnscmd dnssvr1.contoso.com /zoneresettype test.contoso.com /primary /file test.contoso.com.dns
dnscmd dnssvr1.contoso.com /zoneresettype second.contoso.com /secondary 10.0.0.2</pre><br/>### <a name=BKMK_35></a>dnscmd/zoneresume<br/>以前に一時停止していた指定されたゾーンを開始します。<br/># # # # 構文<br/><code>dnscmd &lt;ServerName&gt; /zoneresume &lt;ZoneName&gt;</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>再開するゾーンの名前を指定します。<br/># # # # 解説<br/>-この操作を使用すると、<a href=#BKMK_27 data-raw-source=[zonepause](#BKMK_27)>ゾーンの一時停止</a>操作を元に戻すことができます。<br/># # # # 使用状況のサンプル<br/><code>dnscmd dnssvr1.contoso.com /zoneresume test.contoso.com</code><br/>### <a name=BKMK_36></a>dnscmd/zoneupdatefromds<br/>指定された active directory 統合ゾーンを AD DS から更新します。<br/># # # # 構文<br/><code>dnscmd &lt;ServerName&gt; /zoneupdatefromds &lt;ZoneName&gt;</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>更新するゾーンの名前を指定します。<br/># # # # 解説<br/>-active directory 統合ゾーンは、既定で5分ごとにこの更新を実行します。 このパラメーターを変更するには、 **dnscmd config dspollinginterval**コマンドを使用します。<br/># # # # 使用状況のサンプル<br/><code>dnscmd dnssvr1.contoso.com /zoneupdatefromds</code><br/>### <a name=BKMK_37></a>dnscmd/zonewriteback<br/>指定されたゾーンに関連する変更について DNS サーバーのメモリを確認し、永続ストレージに書き込みます。<br/># # # # 構文<br/><code>dnscmd &lt;ServerName&gt; /zonewriteback &lt;ZoneName&gt;</code><br/># # # # # パラメーター<br/>**<ServerName>**<br/>管理する DNS サーバーを指定します。 IP アドレス、FQDN、またはホスト名で表されます。 このパラメーターを省略した場合は、ローカルサーバーが使用されます。<br/>**<ZoneName>**<br/>更新するゾーンの名前を指定します。<br/># # # # 解説<br/>-これはゾーンレベルの操作です。 <a href=#BKMK_21 data-raw-source=[writebackfiles](#BKMK_21)>Writebackfiles</a>操作を使用して、DNS サーバー上のすべてのゾーンを更新できます。<br/># # # # 使用状況のサンプル<br/><code>dnscmd dnssvr1.contoso.com /zonewriteback test.contoso.com</code>
