---
title: クラスター対応更新の概要
description: クラスター対応更新 (CAU) は、Windows Server を実行しているクラスターへのソフトウェア更新プログラムのインストールを自動化します。
ms.topic: article
ms.prod: windows-server
manager: lizross
author: JasonGerend
ms.author: jgerend
ms.technology: storage-failover-clustering
ms.date: 08/06/2018
ms.assetid: 3c2993b4-aa81-452b-a5c3-3724ad95d892
ms.openlocfilehash: a889e19947d014bc2008417f64f6be5cc53112e6
ms.sourcegitcommit: 145cf75f89f4e7460e737861b7407b5cee7c6645
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 07/29/2020
ms.locfileid: "87409893"
---
# <a name="cluster-aware-updating-overview"></a>クラスター対応更新の概要

> 適用先:Windows Server 2019、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

このトピックでは \- \( \) 、可用性を維持したままクラスター化されたサーバーでソフトウェア更新プロセスを自動化する機能である、クラスター対応更新 CAU の概要について説明します。

> [!NOTE]
> [記憶域スペースダイレクト](../storage/storage-spaces/storage-spaces-direct-overview.md)クラスターを更新する場合は、クラスター対応更新を使用することをお勧めします。

## <a name="feature-description"></a><a name="BKMK_OVER"></a>機能の説明
クラスター対応更新は自動化された機能で、[フェールオーバークラスター](failover-clustering-overview.md)内のサーバーを更新するときに、更新プロセス中に可用性をほとんどまたはまったく失わないようにすることができます。 更新実行中、クラスター対応更新は、次のタスクを透過的に実行します。

1. クラスターの各ノードをノードメンテナンスモードにします。
2. クラスター化された役割をノードから移動します。
3. 更新プログラムとその依存関係のある更新プログラムをインストールします。
4. 必要に応じて、再起動を実行します。
5. ノードをメンテナンスモードから除外します。
6. ノード上のクラスター化された役割を復元します。
7. 次のノードを更新するために移動します。

多くのクラスター役割がクラスターにある場合、自動更新プロセスにより計画フェールオーバーがトリガーされます。 これにより、接続されたクライアントに対するサービスが一時的に中断されることがあります。 ただし、 \- ライブマイグレーションや SMB 透過フェールオーバーを使用したファイルサーバーなど、継続的に使用可能なワークロードの場合、クラスター対応更新では、サービスの可用性に影響を与えずにクラスターの更新を調整できます。

## <a name="practical-applications"></a>実際の適用例

-   CAU は、クラスター化されたサービスのサービスの停止を減らし、手動更新の回避策の必要性を軽減し、エンドツー \- \- エンドのクラスター更新プロセスを管理者にとってより信頼性の高いものにします。 継続的に使用可能なクラスターワークロード (SMB 透過フェールオーバーまたは Hyper-v を使用した継続的に使用できるファイルサーバーのワークロードなど) と共に CAU 機能を使用すると、 \( \) \- クライアントのサービスの可用性にゼロの影響を与えることでクラスターの更新を実行できます。

-   CAU によって、全社的に統一された IT プロセスを導入しやすくなります。 実行プロファイルの更新は、さまざまなクラスのフェールオーバークラスターに対して作成し、ファイル共有で一元的に管理することで、クラスターが異なる基幹 \- \- 業務または管理者によって管理されている場合でも、継続的に更新を適用することができます。

-   CAU では、更新実行のスケジュールを設定できます。毎日、毎週、毎月など、定期的に実行することで、他の IT 管理プロセスとの間でクラスターの更新を調整することができます。

-   CAU は、クラスターソフトウェアインベントリをクラスター対応の方法で更新するための拡張可能なアーキテクチャを提供 \- します。 発行元はこれを使用して、Windows Update または Microsoft Update に発行されていないソフトウェア更新プログラム、または Microsoft が提供していないソフトウェア更新プログラム (microsoft 以外のデバイスドライバーの更新プログラムなど) のインストールを調整でき \- ます。

-   CAU 自己 \- 更新モードでは、"ボックス内のクラスター" アプライアンスが \( クラスター化された物理マシンのセットを有効にします。通常は、1つのシャーシにパッケージ化して、 \) それ自体を更新します。 通常、このようなアプライアンスは、現場での IT のサポートが限られているブランチ オフィスで、クラスターを管理することを目的に展開されます。 自己 \- 更新モードは、これらの展開シナリオで優れた価値を提供します。

## <a name="important-functionality"></a>重要な機能
次に、クラスター対応更新の重要な機能について説明します。

-   ユーザーインターフェイス \( UI \) -クラスター対応更新ウィンドウと、更新プログラムのプレビュー、適用、監視、およびレポートに使用できる一連のコマンドレット

-   \- \- \- \( \) 1 つまたは複数の更新コーディネーターコンピューターによって調整された、更新実行のクラスター更新操作のエンドツーエンドの自動化

-   \-Windows Server の既存の Windows Update エージェント \( WUA および Windows Server Update Services WSUS インフラストラクチャと統合され、 \) \( \) 重要な Microsoft 更新プログラムを適用するための既定のプラグイン

-   Microsoft の修正プログラムを適用するために使用できる2番目のプラグイン。 \- microsoft 以外の \- 更新プログラムを適用するようにカスタマイズすることができます。

-   更新実行プロファイル。更新実行オプション (1 ノードあたりの再試行回数の上限など) 設定を構成するときに使います。 複数の更新実行で同じ設定を再利用でき、更新設定を他のフェールオーバー クラスターと簡単に共有することができます。

-   新しいプラグイン開発をサポートする拡張可能なアーキテクチャ。 \- \- カスタムソフトウェアインストーラー、BIOS 更新ツール、ネットワークアダプターやホストバスアダプターの HBA 更新ツールなど、クラスター上の他のノード更新ツールを調整し \( \) ます。

クラスター対応更新は、次の 2 つのモードで完全なクラスター更新操作を調整できます。

-   **自己 \- 更新モード**このモードでは、CAU のクラスター化された役割は、更新対象のフェールオーバークラスター上のワークロードとして構成され、関連する更新スケジュールが定義されます。 予定の時刻になると、クラスターが既定またはカスタムの更新実行プロファイルを使って自己更新します。 更新実行中、その時点で CAU のクラスター化された役割を所有しているノード上の CAU 更新コーディネーター プロセスが起動し、それぞれのクラスター ノードに対する更新処理を順番に実行します。 現在のクラスター ノードを更新するために、CAU のクラスター化された役割は別のクラスター ノードにフェールオーバーされ、そのノード上の新しい更新コーディネーター プロセスが更新実行の制御を引き継ぎます。 自己 \- 更新モードでは、CAU は完全に自動化されたエンドツーエンドの更新プロセスを使用して、フェールオーバークラスターを更新でき \- \- ます。 また、管理者はこのモードで要求時に更新をトリガーすることも、必要に応じて \- リモート更新方法を使用することもでき \- ます。 自己 \- 更新モードでは、管理者はクラスターに接続し、 **get \- caurun** Windows PowerShell コマンドレットを実行することで、進行中の更新実行に関する概要情報を取得できます。

-   **リモート \- 更新モード**このモードでは、リモートコンピューター (更新コーディネーターと呼ばれます) が CAU ツールで構成されます。 更新コーディネーターは、更新実行中に更新されるクラスターのメンバーではありません。 管理者は、リモートコンピューターから、 \- 既定またはカスタムの更新実行プロファイルを使用して、オンデマンド更新実行をトリガーします。 リモート \- 更新モードは、 \- 更新実行の進行状況をリアルタイムで監視する場合や、Server Core インストールで実行しているクラスターの場合に便利です。

## <a name="hardware-and-software-requirements"></a>ハードウェアとソフトウェアの要件

CAU は、Server Core インストールを含む、Windows Server のすべてのエディションで使用できます。 要件の詳細については、「[クラスター対応更新の要件とベストプラクティス](cluster-aware-updating-requirements.md)」を参照してください。

### <a name="installing-cluster-aware-updating"></a>クラスター対応更新のインストール
CAU を使用するには、Windows Server のフェールオーバークラスタリング機能をインストールし、フェールオーバークラスターを作成します。 CAU 機能に必要なコンポーネントは、各クラスター ノードに自動的にインストールされます。

フェールオーバー クラスタリング機能は、次のツールを使ってインストールできます。
- 役割と機能の追加ウィザード (サーバー マネージャー)
- [Install-add-windowsfeature](https://docs.microsoft.com/powershell/module/servermanager/Install-WindowsFeature?view=winserver2012r2-ps&viewFallbackFrom=win10-ps)  Windows PowerShell コマンドレット
- 展開イメージのサービスと管理 (DISM) のコマンド ライン ツール

詳細については、「[フェールオーバークラスタリング機能のインストール](create-failover-cluster.md#install-the-failover-clustering-feature)」を参照してください。

また、フェールオーバークラスタリングツールをインストールする必要があります。これはリモートサーバー管理ツールの一部でありサーバーマネージャーでフェールオーバークラスタリング機能をインストールすると、既定でインストールされます。 フェールオーバークラスタリングツールには、クラスター対応更新のユーザーインターフェイスと PowerShell コマンドレットが含まれています。

サポートする CAU 更新モードに応じて、フェールオーバー クラスタ リング ツールを次の方法でインストールする必要があります。

- 自己更新モードで CAU を使用するには \- 、各クラスターノードにフェールオーバークラスタリングツールをインストールします。

- リモート更新モードを有効にするには \- 、フェールオーバークラスターへのネットワーク接続があるコンピューターにフェールオーバークラスタリングツールをインストールします。

> [!NOTE]
> -   Windows server 2012 のフェールオーバークラスタリングツールを使用して、新しいバージョンの Windows Server でクラスター対応更新を管理することはできません。
> -   CAU をリモート更新モードでのみ使用する \- 場合、クラスターノードにフェールオーバークラスタリングツールをインストールする必要はありません。 ただし、特定の CAU の機能は使用できなくなります。 詳細については、「[クラスター \- 対応更新の要件とベストプラクティス](cluster-aware-updating-requirements.md)」を参照してください。
> -   自己更新モードでのみ CAU を使用している場合 \- を除き、cau ツールがインストールされていて、更新を調整するコンピューターをフェールオーバークラスターのメンバーにすることはできません。

### <a name="enabling-self-updating-mode"></a>自己更新モードを有効にする
自己更新モードを有効にするには、クラスター対応更新のクラスター化された役割をフェールオーバークラスターに追加する必要があります。 そのためには、次の手順のいずれかを実行します。
- サーバーマネージャーで [**ツール**] [クラスター対応更新] の順に選択し、[  >  **Cluster-Aware Updating**クラスター対応更新] ウィンドウで [**クラスターの自己更新オプションの構成**] を選択します。
- PowerShell セッションで、 [add-cauclusterrole](https://docs.microsoft.com/powershell/module/clusterawareupdating/Add-CauClusterRole?view=win10-ps)コマンドレットを実行します。

CAU をアンインストールするには、サーバーマネージャー、 [uninstall](https://docs.microsoft.com/powershell/module/servermanager/Uninstall-WindowsFeature?view=win10-ps)コマンドレット、または DISM コマンドラインツールを使用して、フェールオーバークラスタリング機能またはフェールオーバークラスタリングツールをアンインストールし \- ます。

### <a name="additional-requirements-and-best-practices"></a>その他の要件とベスト プラクティス

CAU によりクラスター ノードが正常に更新できることを確認するには、また、CAU を使用するようにフェールオーバー クラスター環境を構成するための追加のガイダンスを参照するには、CAU ベスト プラクティス アナライザーを実行できます。

CAU の使用に関する詳細な要件とベストプラクティス、および CAU ベストプラクティスアナライザーの実行に関する情報については、「[クラスター \- 対応更新の要件とベストプラクティス](cluster-aware-updating-requirements.md)」を参照してください。

### <a name="starting-cluster-aware-updating"></a>クラスター対応更新の開始

##### <a name="to-start-cluster-aware-updating-from-server-manager"></a>サーバーマネージャーからクラスター対応更新を開始するには

1.  Server Manager を起動します。

2.  次のいずれかの操作を行います。

    -   [**ツール**] メニューの [**クラスター \- 対応更新**] をクリックします。

    -   サーバーマネージャーに1つ以上のクラスターノードまたはクラスターが追加された場合は、[**すべてのサーバー** ] ページで、 \- ノードの \( 名前またはクラスターの名前を右クリックし、 \) [クラスターの**更新**] をクリックします。

## <a name="additional-references"></a>その他のリファレンス
クラスター対応更新の使用方法の詳細については、次のリンクを参照してください。

-   [クラスター対応更新の要件とベストプラクティス \-](cluster-aware-updating.md)

-   [クラスター \- 対応更新: よく寄せられる質問](cluster-aware-updating-faq.md)

-   [CAU の詳細オプションと更新実行プロファイル](cluster-aware-updating-options.md)

-   [CAU \- プラグインのしくみ](cluster-aware-updating-plug-ins.md)

-   [\-Windows PowerShell のクラスター対応更新コマンドレット](https://docs.microsoft.com/powershell/module/clusterawareupdating/?view=win10-ps&viewFallbackFrom=winserverr2-ps)

-   [クラスター \- 対応更新プラグイン \- の参照](/previous-versions/windows/desktop/mscs/cluster-aware-update-plug-in-interfaces-and-classes)


