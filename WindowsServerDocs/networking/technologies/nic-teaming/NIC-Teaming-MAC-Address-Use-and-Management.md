---
title: NIC チーミングでの MAC アドレスの使用と管理
description: スイッチ独立モードで NIC チームを構成し、ハッシュまたは動的な負荷分散のいずれかを行うと、チームは送信トラフィックでプライマリ NIC チームメンバーのメディアアクセス制御 (MAC) アドレスを使用します。 プライマリ NIC チームメンバーは、チームメンバーの初期セットからオペレーティングシステムによって選択されたネットワークアダプターです。
manager: dougkim
ms.custom: na
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: networking-nict
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 26d105e0-afc3-44b5-bb5e-0c884a4c5d62
ms.author: lizross
author: eross-msft
ms.openlocfilehash: d8e7130d5774c19cc3d51045786bfef319cf7d16
ms.sourcegitcommit: da7b9bce1eba369bcd156639276f6899714e279f
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 03/26/2020
ms.locfileid: "80316434"
---
# <a name="nic-teaming-mac-address-use-and-management"></a>NIC チーミングでの MAC アドレスの使用と管理

>適用対象: Windows Server 2016

スイッチ独立モードで NIC チームを構成し、ハッシュまたは動的な負荷分散のいずれかを行うと、チームは送信トラフィックでプライマリ NIC チームメンバーのメディアアクセス制御 (MAC) アドレスを使用します。 プライマリ NIC チームメンバーは、チームメンバーの初期セットからオペレーティングシステムによって選択されたネットワークアダプターです。  チームを作成した後、またはホストコンピューターを再起動した後に、チームにバインドする最初のチームメンバーです。 プライマリチームメンバーは、各ブートで非決定的な方法で変更される可能性があるため、NIC の無効化/有効化アクション、またはその他の再構成アクティビティでは、プライマリチームメンバーが変更される可能性があり、チームの MAC アドレスが異なる可能性があります。  
  
ほとんどの場合、これによって問題が発生することはありませんが、問題が発生する可能性があります。  
  
プライマリチームメンバーがチームから削除され、操作に配置されている場合は、MAC アドレスの競合が発生する可能性があります。 この競合を解決するには、チームインターフェイスを無効にしてから有効にします。 チームインターフェイスを無効にしてから有効にするプロセスにより、インターフェイスは、残りのチームメンバーから新しい MAC アドレスを選択するため、MAC アドレスの競合が回避されます。  
  
NIC チームの MAC アドレスは、物理 NIC の MAC アドレスを構成する場合と同様に、プライマリチームインターフェイスで設定することによって、特定の MAC アドレスに設定できます。  
  
## <a name="mac-address-use-on-transmitted-packets"></a>送信パケットでの MAC アドレスの使用  
スイッチ独立モードで NIC チームを構成し、アドレスハッシュまたは動的負荷分散のいずれかを行うと、1つのソースからのパケット (1 つの VM など) が複数のチームメンバーに同時に分散されます。 スイッチが混同されないようにし、MAC フラッピングアラームを防止するために、ソースの MAC アドレスは、プライマリチームメンバー以外のチームメンバーに送信されるフレームの別の MAC アドレスに置き換えられます。 このため、各チーム メンバーが別の MAC アドレスを使用して、MAC アドレスの競合はしない限り、エラーが発生したためにできませんでした。  
  
プライマリ NIC でエラーが検出されると、NIC チーミングソフトウェアは、一時的なプライマリチームメンバーとして機能するように選択されたチームメンバー (つまり、プライマリチームとして切り替えられるようになったチームメンバー) でプライマリチームメンバーの MAC アドレスを使用して開始します。メンバー)。  この変更は、プライマリチームメンバーの MAC アドレスをソース MAC アドレスとしてプライマリチームメンバーに送信されるトラフィックにのみ適用されます。 その他のトラフィックは、どのようなソースは、障害発生前に使用した MAC アドレスと送信されます。  
  
次に示すのは、チームの構成方法に基づいて、NIC チーミングの MAC アドレス置換動作を説明する一覧です。  
  
1.  **アドレスハッシュ分散を使用したスイッチ非依存モード**  
  
    -   すべての ARP および NS パケットがプライマリチームメンバーに送信されます  
  
    -   プライマリチームメンバー以外の Nic で送信されたすべてのトラフィックは、送信元の NIC と一致するように変更されたソース MAC アドレスを使用して送信されます。  
  
    -   プライマリチームメンバーに送信されるすべてのトラフィックは、元の送信元 MAC アドレス (チームのソース MAC アドレスである可能性があります) を使用して送信されます。  
  
2.  **Hyper-v ポート配布を使用したスイッチ非依存モード**  
  
    -   各 vmSwitch ポートが、チーム メンバーに関連付けられます  
  
    -   ポートが関連付けられ、そのチーム メンバーにすべてのパケットを送信します。  
  
    -   ソース MAC の置換は行われません  
  
3.  **動的分散を使用するスイッチ非依存モード**  
  
    -   各 vmSwitch ポートが、チーム メンバーに関連付けられます  
  
    -   ARP/NS のすべてのパケットが、ポートが関連付けられ、そのチーム メンバーに送信されます。  
  
    -   アフィニティを設定したチーム メンバーは、チーム メンバーに送信されるパケットがソース MAC アドレスの置き換えが行われますを持っていません  
  
    -   アフィニティを設定したチーム メンバー以外のチーム メンバーに送信されるパケットがソース MAC アドレスの置換が完了には  
  
4.  **スイッチ依存モード (すべてのディストリビューション)**  
  
    -   ソース MAC アドレスの置換は実行されません  
  
## <a name="related-topics"></a>関連トピック
- [NIC チーミング](NIC-Teaming.md): このトピックでは、Windows Server 2016 でのネットワークインターフェイスカード (NIC) チーミングの概要について説明します。 NIC チーミングを使用すると、1つまたは32の物理イーサネットネットワークアダプターを、1つまたは複数のソフトウェアベースの仮想ネットワークアダプターにグループ化することができます。 これらの仮想ネットワーク アダプターは、高速なパフォーマンスに加え、ネットワーク アダプターに障害が発生した場合のフォールト トレランスを提供します。  

- [Nic チーミングの設定](nic-teaming-settings.md): このトピックでは、チーミングや負荷分散のモードなど、nic チームのプロパティの概要を説明します。 また、スタンバイアダプターの設定とプライマリチームインターフェイスのプロパティについても詳しく説明します。 NIC チームに少なくとも2つのネットワークアダプターがある場合は、フォールトトレランスのためにスタンバイアダプターを指定する必要はありません。
  
- [ホストコンピューターまたは vm に新しい Nic チームを作成](Create-a-New-NIC-Team-on-a-Host-Computer-or-VM.md)する: このトピックでは、Windows Server 2016 を実行しているホストコンピューターまたは hyper-v 仮想マシン (VM) に新しい nic チームを作成します。

- [Nic チーミングのトラブルシューティング](Troubleshooting-NIC-Teaming.md): このトピックでは、ハードウェア、物理スイッチのセキュリティ、Windows PowerShell を使用したネットワークアダプターの無効化または有効化など、nic チーミングのトラブルシューティングを行う方法について説明します。 
  


