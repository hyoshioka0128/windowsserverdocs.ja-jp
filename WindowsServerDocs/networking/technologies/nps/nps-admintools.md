---
title: 管理ツールを使ったネットワーク ポリシー サーバーの管理
description: このトピックでは、Windows Server 2016 でネットワークポリシーサーバーを管理するために使用できるツールについて説明します。
manager: brianlic
ms.topic: article
ms.assetid: 5de80dc0-53be-42b7-8e5b-24d213bf2b25
ms.author: lizross
author: eross-msft
ms.openlocfilehash: 68127562525ead20726ee61322d077c1c9093d32
ms.sourcegitcommit: 68444968565667f86ee0586ed4c43da4ab24aaed
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/07/2020
ms.locfileid: "87994146"
---
# <a name="network-policy-server-management-with-administration-tools"></a>管理ツールを使ったネットワーク ポリシー サーバーの管理

>適用先:Windows Server (半期チャネル)、Windows Server 2016

このトピックでは、NPSs の管理に使用できるツールについて説明します。

NPS をインストールすると、NPSs を管理できます。

- ローカルでは、NPS Microsoft 管理コンソール \( MMC \) スナップイン、管理ツールの静的 nps コンソール、Windows PowerShell コマンド、または \( Nps 用のネットワークシェル Netsh コマンドを使用し \) ます。
- リモート NPS から、NPS MMC スナップインを使用して、nps の Netsh コマンド、nps 用の Windows PowerShell コマンド、またはリモートデスクトップ接続します。
- リモートワークステーションから、リモートデスクトップ接続を NPS MMC や Windows PowerShell などの他のツールと組み合わせて使用します。

>[!NOTE]
>Windows Server 2016 では、NPS コンソールを使用してローカル NPS を管理できます。 リモートとローカルの NPSs の両方を管理するには、NPS MMC スナップインを使用する必要があり \- ます。

以下のセクションでは、ローカルとリモートの NPSs を管理する方法について説明します。

## <a name="configure-the-local-nps-by-using-the-nps-console"></a>NPS コンソールを使用してローカル NPS を構成する

NPS をインストールした後、次の手順を使用して、NPS MMC を使用してローカル NPS を管理できます。

**管理者の資格情報**

この手順を完了するには、Administrators グループのメンバーである必要があります。

### <a name="to-configure-the-local-nps-by-using-the-nps-console"></a>NPS コンソールを使用してローカル NPS を構成するには

1. サーバー マネージャーで **[ツール]** をクリックし、 **[ネットワーク ポリシー サーバー]** をクリックします。 NPS コンソールが開きます。

2. NPS コンソールで、[NPS ローカル] をクリックし \( \) ます。 詳細ペインで、[**標準構成**] または **[詳細構成**] のいずれかを選択し、選択に基づいて次のいずれかを実行します。
    - [**標準構成**] を選択した場合は、一覧からシナリオを選択し、指示に従って構成ウィザードを開始します。
    - [**詳細構成**] を選択した場合は、矢印をクリックして [**詳細構成オプション**] を展開し、radius サーバー、radius プロキシ、またはその両方の NPS 機能に基づいて、使用可能なオプションを確認して構成します。

## <a name="manage-multiple-npss-by-using-the-nps-mmc-snap-in"></a>NPS MMC スナップインを使用して複数の \- NPSs を管理する

この手順を使用すると、NPS MMC スナップインを使用してローカル NPS と複数のリモート NPSs を管理でき \- ます。

以下の手順を実行する前に、ローカルコンピューターとリモートコンピューターに NPS をインストールする必要があります。

ネットワークの状態と、NPS MMC スナップインを使用して管理する NPSs の数によっては、 \- mmc スナップインの応答に \- 時間がかかることがあります。 さらに、nps スナップインを使用して、リモート管理セッション中に NPS 構成トラフィックがネットワーク経由で送信され \- ます。 ネットワークが物理的に安全であり、悪意のあるユーザーにこのネットワークトラフィックへのアクセス権がないことを確認します。

**管理者の資格情報**

この手順を完了するには、Administrators グループのメンバーである必要があります。

### <a name="to-manage-multiple-npss-by-using-the-nps-snap-in"></a>NPS スナップインを使用して複数の NPSs を管理する \- には

1. MMC を開くには、管理者として Windows PowerShell を実行します。 Windows PowerShell で、「 **mmc**」と入力し、enter キーを押します。 Microsoft 管理コンソールが開きます。
2. MMC で、[**ファイル**] メニューの [スナップインの**追加と削除] を \- **クリックします。 [**スナップインの追加 \- と削除**] ダイアログボックスが表示されます。
3. [**スナップ \- インの追加と削除**] の [**使用できるスナップ \- **イン] で、一覧を下にスクロールし、[**ネットワークポリシーサーバー**] をクリックして、[**追加**] をクリックします。 **[コンピューターの選択**] ダイアログボックスが表示されます。
4. **[コンピューターの選択**] で、[ ** \( このコンソールが \) 実行**されているコンピューター] が選択されていることを確認し、[ **OK]** をクリックします。 \-ローカル NPS のスナップインが [**選択されたスナップ \- **イン] の一覧に追加されます。
5. [**スナップ \- インの追加と削除**] の [**使用できるスナップ \- **イン] で、[**ネットワークポリシーサーバー** ] が選択されていることを確認し、[**追加**] をクリックします。 **[コンピューターの選択**] ダイアログボックスが再び開きます。
6. [**コンピューターの選択**] で [**別のコンピューター**] をクリックし、 \( \) nps スナップインを使用して管理するリモート NPS の IP アドレスまたは完全修飾ドメイン名の FQDN を入力し \- ます。 必要に応じて、[参照] をクリックして、追加するコンピューターのディレクトリを**参照**することもできます。 **[OK]** をクリックします。
7. 手順 5. と 6. を繰り返して、さらに NPSs を NPS スナップインに追加し \- ます。 管理する NPSs をすべて追加したら、[ **OK]** をクリックします。
8. 後で使用するために NPS スナップインを保存するには、[**ファイル**] をクリックし、[**保存**] をクリックします。 [名前を付け**て保存**] ダイアログボックスで、ファイルを保存するハードディスクの場所を参照し、Microsoft 管理コンソールの .msc ファイルの名前を入力して、 \( \) [**保存**] をクリックします。

## <a name="manage-an-nps-by-using-remote-desktop-connection"></a>リモートデスクトップ接続を使用した NPS の管理

次の手順を使用して、リモートデスクトップ接続を使用してリモート NPS を管理できます。

リモートデスクトップ接続を使用すると、Windows Server 2016 を実行している NPSs をリモートで管理できます。 Windows 10 以前の Windows クライアントオペレーティングシステムを実行しているコンピューターから NPSs をリモートで管理することもできます。

リモートデスクトップ接続を使用すると、2つの方法のいずれかを使用して複数の NPSs を管理できます。

1. 各 NPSs へのリモートデスクトップ接続を個別に作成します。
2. リモートデスクトップを使用して1つの NPS に接続し、そのサーバー上の NPS MMC を使用して他のリモートサーバーを管理します。 詳細については、前のセクション「 **NPS MMC スナップインを使用して複数の NPSs を管理する」を \- 参照し**てください。

**管理者の資格情報**

この手順を完了するには、NPS の Administrators グループのメンバーである必要があります。

### <a name="to-manage-an-nps-by-using-remote-desktop-connection"></a>リモートデスクトップ接続を使用して NPS を管理するには

1. リモートで管理する各 NPS の [サーバーマネージャーで、[**ローカルサーバー**] を選択します。 [サーバーマネージャーの詳細] ウィンドウで、[**リモートデスクトップ**] 設定を表示して、次のいずれかの操作を行います。
    1. [**リモートデスクトップ**] 設定の値が**有効になっ**ている場合、この手順の一部を実行する必要はありません。 手順 4. に進み、リモートデスクトップユーザーのアクセス許可の構成を開始します。
    2. **リモートデスクトップ**の設定が**無効**になっている場合は、[**無効**] という単語をクリックします。 [**システムのプロパティ**] ダイアログボックスが [**リモート**] タブに表示されます。
2. **リモートデスクトップ**で、[**このコンピューターへのリモート接続を許可**する] をクリックします。 [**リモートデスクトップ接続**] ダイアログボックスが表示されます。 次のいずれかの操作を行います。
    1. 許可するネットワーク接続をカスタマイズするには、[**セキュリティが強化された Windows ファイアウォール**] をクリックし、許可する設定を構成します。
    2. コンピューター上のすべてのネットワーク接続に対してリモートデスクトップ接続を有効にするには、[ **OK]** をクリックします。
3. [**システムのプロパティ**] の [**リモートデスクトップ**] で、[ネットワークレベル認証を使用して**リモートデスクトップを実行しているコンピューターからのみ接続を許可**する] を有効にするかどうかを決定し、選択を行います。
4. クリックして **ユーザー選択**します。 [**リモートデスクトップユーザー** ] ダイアログボックスが表示されます。
5. **リモートデスクトップユーザー**で、NPS にリモート接続するためのアクセス許可をユーザーに付与するには、[**追加**] をクリックし、ユーザーのアカウントのユーザー名を入力します。 **[OK]** をクリックします。
6. NPS にリモートアクセス許可を付与するユーザーごとに、手順 5. を繰り返します。 ユーザーの追加が完了したら、[ **OK** ] をクリックして [**リモートデスクトップユーザー** ] ダイアログボックスを閉じ、もう一度 **[ok]** をクリックして [**システムのプロパティ**] ダイアログボックスを閉じます。
7. 前の手順を使用して構成したリモート NPS に接続するには、[**スタート**] をクリックし、アルファベット順の一覧を下にスクロールして、[ **Windows アクセサリ**] をクリックし、[**リモートデスクトップ接続**] をクリックします。 [**リモートデスクトップ接続**] ダイアログボックスが表示されます。
8. [**リモートデスクトップ接続**] ダイアログボックスの [**コンピューター**] で、NPS の名前または IP アドレスを入力します。 必要に応じて、[**オプション**] をクリックし、追加の接続オプションを構成し、[**保存**] をクリックして、繰り返し使用する接続を保存します。
9. [**接続**] をクリックすると、NPS にログオンして構成するためのアクセス許可を持つアカウントのユーザーアカウント資格情報を入力するように求められます。

## <a name="use-netsh-nps-commands-to-manage-an-nps"></a>Netsh NPS コマンドを使用して NPS を管理する

Netsh NPS コンテキストでコマンドを使用して、NPS とリモートアクセスサービスの両方で使用される認証、承認、アカウンティング、および監査データベースの構成を表示し、設定することができます。 Netsh NPS コンテキストでコマンドを使用して、次の操作を行います。

- Nps を構成または再構成します。これには、nps コンソールの Windows インターフェイスを使用して構成することもできます。
- レジストリキーと NPS 構成ストアを含む、1つの NPS (移行元サーバー) の構成を Netsh スクリプトとしてエクスポートします。
- Netsh スクリプトとソース NPS からエクスポートした構成ファイルを使用して、構成を別の NPS にインポートします。

これらのコマンドは、Windows Server 2016 のコマンドプロンプトまたは Windows PowerShell から実行できます。 Netsh nps コマンドは、スクリプトやバッチファイルで実行することもできます。

**管理者の資格情報**

この手順を実行するには、ローカル コンピュータの管理者グループのメンバである必要があります。

### <a name="to-enter-the-netsh-nps-context-on-an-nps"></a>NPS に Netsh NPS コンテキストを入力するには

1. コマンドプロンプトまたは Windows PowerShell を開きます。
2. 「 **Netsh**」と入力し、enter キーを押します。
3. 「 **Nps**」と入力し、enter キーを押します。
4. 使用可能なコマンドの一覧を表示するには、疑問符 (?) を入力し、enter \( \) キーを押します。


Netsh NPS コマンドの詳細については、「 [Windows Server 2008 のネットワークポリシーサーバーの場合は Netsh コマンド](/previous-versions/windows/it-pro/windows-server-2008-R2-and-2008/cc754428(v=ws.10))」を参照してください。または、TechNet ギャラリーから[netsh Technical Reference](https://gallery.technet.microsoft.com/Netsh-Technical-Reference-c46523dc?redir=0)全体をダウンロードしてください。 このダウンロードは、Windows Server 2008 および Windows Server 2008 R2 の完全なネットワークシェルのテクニカルリファレンスです。 この形式は、 \( zip ファイルの Windows ヘルプ * .chm です \) 。 これらのコマンドは、Windows Server 2016 と Windows 10 にも存在するので、Windows PowerShell を使用することをお勧めしますが、これらの環境では netsh を使用することをお勧めします。

## <a name="use-windows-powershell-to-manage-npss"></a>Windows PowerShell を使用して NPSs を管理する

Windows PowerShell コマンドを使用して NPSs を管理できます。 詳細については、次の Windows PowerShell コマンドリファレンストピックを参照してください。

- [Windows PowerShell のネットワークポリシーサーバー (NPS) コマンドレット](/powershell/module/nps/?view=win10-ps&viewFallbackFrom=winserverr2-ps)。 これらの netsh コマンドは、Windows Server 2012 R2 以降のオペレーティングシステムで使用できます。
- [NPS モジュール](/powershell/module/nps/?view=win10-ps)。 これらの netsh コマンドは、Windows Server 2016 で使用できます。

NPS の管理の詳細については、「 [Manage Network Policy Server (nps)](nps-manage-top.md)」を参照してください。