---
title: DNS クライアントでの DNS クライアント側のキャッシュを無効にする
description: この記事では、dns クライアントで DNS クライアント側のキャッシュを無効にする方法について説明します。
manager: willchen
ms.prod: ''
ms.technology: networking-dns
ms.topic: article
ms.author: delhan
ms.date: 8/8/2019
author: Deland-Han
ms.openlocfilehash: 0b20400029b462798587c2291431b5a7c3d61775
ms.sourcegitcommit: 0e3c2473a54f915d35687d30d1b4b1ac2bae4068
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/09/2019
ms.locfileid: "68917809"
---
# <a name="disable-dns-client-side-caching-on-dns-clients"></a>DNS クライアントでの DNS クライアント側のキャッシュを無効にする

Windows には、クライアント側の DNS キャッシュが含まれています。 クライアント側の DNS キャッシュ機能では、dns の "ラウンドロビン" 負荷分散が DNS サーバーから Windows クライアントコンピューターに対して行われていないという誤った印象を生成することがあります。 Ping コマンドを使用して同じ A レコードドメイン名を検索すると、クライアントは同じ IP アドレスを使用する場合があります。  

## <a name="how-to-disable-client-side-caching"></a>クライアント側のキャッシュを無効にする方法

DNS キャッシュを停止するには、次のコマンドのいずれかを実行します。

```cmd
net stop dnscache
```

```cmd
sc servername stop dnscache
```


Windows で DNS キャッシュを完全に無効にするには、サービスコントローラーツールまたはサービスツールを使用して、DNS クライアントサービスのスタートアップの種類を **[無効]** に設定します。 Windows DNS クライアントサービスの名前は、"Dnscache" として表示される場合もあることに注意してください。 

> [!NOTE]
> DNS リゾルバーのキャッシュが非アクティブになると、クライアントコンピューターの全体的なパフォーマンスが低下し、DNS クエリのネットワークトラフィックが増加します。 

DNS クライアントサービスは、以前に解決された名前をメモリに格納することによって、DNS 名前解決のパフォーマンスを最適化します。 DNS クライアントサービスが無効になっている場合でも、コンピューターはネットワークの DNS サーバーを使用して DNS 名を解決できます。 

Windows リゾルバーがクエリに対して肯定または否定のいずれかの応答を受信すると、その応答がキャッシュに追加され、その結果、DNS リソースレコードが作成されます。 リゾルバーは、DNS サーバーに対してクエリを実行する前に常にキャッシュをチェックします。 DNS リソースレコードがキャッシュ内にある場合、競合回避モジュールは、サーバーを照会する代わりにキャッシュのレコードを使用します。 この動作により、クエリが迅速化され、DNS クエリのネットワークトラフィックが減少します。 

Ipconfig ツールを使用して、DNS リゾルバーキャッシュを表示およびフラッシュできます。 DNS リゾルバーのキャッシュを表示するには、コマンドプロンプトで次のコマンドを実行します。

```cmd
ipconfig /displaydns 
```

このコマンドを実行すると、DNS リゾルバーキャッシュの内容が表示されます。これには、ホストファイルからプリロードされた DNS リソースレコードと、システムによって解決された最近のクエリ名が含まれます。 しばらくすると、リゾルバーはキャッシュからレコードを破棄します。 この期間は、DNS リソースレコードに関連付けられている**Time to Live (TTL)** の値によって指定されます。 キャッシュを手動でフラッシュすることもできます。 キャッシュをフラッシュした後、コンピューターは、以前にコンピューターによって解決されたすべての DNS リソースレコードについて、DNS サーバーに対してもう一度クエリを実行する必要があります。 DNS リゾルバーキャッシュのエントリを削除するには、 `ipconfig /flushdns`コマンドプロンプトでを実行します。

## <a name="next-step"></a>次の手順

詳細については、「 [Windows でクライアント側の DNS キャッシュを無効にする方法](https://support.microsoft.com/kb/318803)」を参照してください。
