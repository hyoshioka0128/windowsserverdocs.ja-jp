---
title: ネットワーク コントローラーの高可用性
description: このトピックでは、Windows Server 2016 のソフトウェア定義ネットワーク (SDN) のネットワークコントローラーの高可用性について説明します。
manager: brianlic
ms.prod: windows-server
ms.technology: networking-sdn
ms.topic: get-started-article
ms.assetid: 334b090d-bec4-4e67-8307-13831dbdd1d8
ms.author: pashort
author: shortpatti
ms.openlocfilehash: 11f392e99803f0e0ddd0f8b62c9dbca5827a831c
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/27/2019
ms.locfileid: "71405940"
---
# <a name="network-controller-high-availability"></a>ネットワーク コントローラーの高可用性

>適用対象:Windows Server (半期チャネル)、Windows Server 2016

このトピックでは、ネットワークコントローラーの高可用性とスケーラビリティの構成について、ソフトウェア定義ネットワーク \(SDN @ no__t-1 について説明します。

データセンターに SDN を展開する場合、ネットワークコントローラーを使用して、多数のネットワーク要素 (RAS ゲートウェイ、ソフトウェアロードバランサー、テナント通信用の仮想ネットワークポリシー、データセンターファイアウォールなど) を一元的に展開、監視、管理できます。ポリシー、サービスの品質 @no__t、SDN ポリシーの場合は 0QoS @ no__t、ハイブリッドネットワークポリシーの場合はその他。

ネットワークコントローラーは SDN 管理の基礎であるため、ネットワークコントローラーの展開で高可用性を実現し、データセンターのニーズに合わせてネットワークコントローラーノードを簡単にスケールアップまたはスケールダウンできるようにすることが重要です。

ネットワークコントローラーは単一のコンピュータークラスターとして展開できますが、高可用性とフェールオーバーのためには、少なくとも3台のコンピューターを含む複数のコンピュータークラスターにネットワークコントローラーを展開する必要があります。

>[!NOTE]
>ネットワークコントローラーは、サーバーコンピューターまたは Windows Server 2016 Datacenter edition を実行している仮想マシン @no__t 0VMs @ no__t-1 に展開できます。 Vm にネットワークコントローラーを展開する場合は、Datacenter edition も実行している Hyper-v ホスト上で Vm が実行されている必要があります。 ネットワークコントローラーは、Windows Server 2016 Standard edition では使用できません。

## <a name="network-controller-as-a-service-fabric-application"></a>Service Fabric アプリケーションとしてのネットワークコントローラー

高可用性とスケーラビリティを実現するために、ネットワークコントローラーは Service Fabric に依存しています。 Service Fabric には、スケーラブルで信頼性が高く、管理が容易なアプリケーションを構築するための分散システムプラットフォームが用意されています。

プラットフォームとして Service Fabric には、スケーラブルな分散システムの構築に必要な機能が用意されています。 複数のオペレーティングシステムインスタンスでのサービスホスティング、インスタンス間での状態情報の同期、リーダーの選定すること、障害検出、負荷分散などを提供します。

>[!NOTE]
>Azure での Service Fabric の詳細については、「 [azure Service Fabric の概要](https://docs.microsoft.com/azure/service-fabric/service-fabric-overview)」を参照してください。

ネットワークコントローラーを複数のコンピューターに展開すると、ネットワークコントローラーは、Service Fabric クラスター上で1つの Service Fabric アプリケーションとして実行されます。 一連のオペレーティングシステムインスタンスに接続することによって、Service Fabric クラスターを形成できます。

ネットワークコントローラーアプリケーションは、複数のステートフル Service Fabric サービスで構成されています。 各サービスは、物理ネットワーク管理、仮想ネットワーク管理、ファイアウォール管理、ゲートウェイ管理などのネットワーク機能を担当します。 

各 Service Fabric サービスには、1つのプライマリレプリカと2つのセカンダリレプリカがあります。 プライマリサービスレプリカは要求を処理しますが、2つのセカンダリサービスレプリカは、何らかの理由でプライマリレプリカが無効または使用できない状況で高可用性を提供します。

次の図は、5台のマシンがあるネットワークコントローラー Service Fabric クラスターを示しています。 4つのサービスは、5台のコンピューターに分散されます。ファイアウォールサービス、ゲートウェイサービス、ソフトウェア負荷分散 \(SLB @ no__t サービス、および仮想ネットワーク \(Vnet @ no__t サービス。  4つのサービスのそれぞれに、1つのプライマリサービスレプリカと2つのセカンダリサービスレプリカが含まれています。

![ネットワークコントローラー Service Fabric クラスター](../../../media/Network-Controller-HA/Network-Controller-HA.jpg)

## <a name="advantages-of-using-service-fabric"></a>Service Fabric を使用する利点

ネットワークコントローラークラスターに Service Fabric を使用する主な利点を次に示します。

### <a name="high-availability-and-scalability"></a>高可用性とスケーラビリティ

ネットワークコントローラーは、データセンターネットワークの中核であるため、障害に対する回復力があり、データセンターネットワークでのアジャイルな変更を長期にわたって可能にするのに十分な拡張性を備えている必要があります。 次の機能により、これらの機能が提供されます。 

- **高速フェールオーバー**。 Service Fabric は非常に高速なフェールオーバーを提供します。 複数のホットセカンダリサービスレプリカを常に使用できます。 ハードウェア障害によってオペレーティングシステムのインスタンスが使用できなくなった場合、セカンダリレプリカの1つがプライマリレプリカに直ちに昇格します。 
- **拡張性の機敏性**。 リソースのニーズに応じて、少数のインスタンスから数千のインスタンスまで、これらの reliable services を簡単かつ迅速に拡張し、いくつかのインスタンスに戻ることができます。 

### <a name="persistent-storage"></a>永続ストレージ

ネットワークコントローラーアプリケーションの構成と状態には、大規模な記憶域が必要です。 また、計画された停止や計画外の停止でもアプリケーションを使用できる必要があります。 このため、Service Fabric はキーと値のストア @no__t を提供します。これは、レプリケートされた、トランザクションおよび永続化されたストアである、0KVS @ no__t-1 です。

### <a name="modularity"></a>モジュール性

ネットワークコントローラーは、モジュール型アーキテクチャを使用して設計されており、各ネットワークサービス (仮想ネットワークサービスやファイアウォールサービスなど) が、個別のサービスとして @ no__t-0in 構築されています。 

このアプリケーションアーキテクチャには、次のような利点があります。

1. ネットワークコントローラーのモジュール性により、必要に応じて、サポートされている各サービスを個別に開発できます。 たとえば、ソフトウェア負荷分散サービスは、他のサービスまたはネットワークコントローラーの通常の動作に影響を与えずに更新できます。
2. ネットワークコントローラーのモジュール性により、ネットワークの進化に伴って新しいサービスを追加できます。 既存のサービスに影響を与えることなく、新しいサービスをネットワークコントローラーに追加することができます。

>[!NOTE]
>Windows Server 2016 では、ネットワークコントローラーへのサードパーティサービスの追加はサポートされていません。

Service Fabric のモジュール化では、サービスモデルスキーマを使用して、アプリケーションの開発、デプロイ、およびサービスを容易にします。

## <a name="network-controller-deployment-options"></a>ネットワークコントローラーの展開オプション

System Center Virtual Machine Manager @no__t 0VMM @ no__t を使用してネットワークコントローラーを展開するには、「 [vmm ファブリックでの SDN ネットワークコントローラーのセットアップ](https://technet.microsoft.com/system-center-docs/vmm/scenario/sdn-network-controller)」を参照してください。

スクリプトを使用してネットワークコントローラーを展開する方法については、「[スクリプトを使用したソフトウェア定義ネットワークインフラストラクチャの展開](../../deploy/Deploy-a-Software-Defined-Network-infrastructure-using-scripts.md)」を参照してください。

Windows PowerShell を使用してネットワークコントローラーを展開するには、「 [Windows powershell を使用したネットワークコントローラーの展開](../../deploy/Deploy-Network-Controller-using-Windows-PowerShell.md)」を参照してください。

ネットワークコントローラーの詳細については、「[ネットワークコントローラー](Network-Controller.md)」を参照してください。