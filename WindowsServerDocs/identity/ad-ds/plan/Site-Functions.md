---
ms.assetid: 22c514b2-401e-49e1-a87e-0cbaa2c1dac1
title: サイトの機能
author: MicrosoftGuyJFlo
ms.author: joflore
manager: mtillman
ms.date: 05/31/2017
ms.topic: article
ms.openlocfilehash: 40fa12c7bb301e0701fbac2e148cfe32820e1fa0
ms.sourcegitcommit: dfa48f77b751dbc34409aced628eb2f17c912f08
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 08/07/2020
ms.locfileid: "87967719"
---
# <a name="site-functions"></a>サイトの機能

> 適用先:Windows Server 2016 では、Windows Server 2012 R2、Windows Server 2012

 Windows Server 2008 では、ルーティングレプリケーション、クライアントアフィニティ、システムボリューム (SYSVOL) レプリケーション、分散ファイルシステム名前空間 (DFSN)、サービスの場所など、さまざまな目的でサイト情報を使用します。

## <a name="routing-replication"></a>レプリケーションのルーティング
Active Directory Domain Services (AD DS) は、マルチマスター、ストアアンドフォワード方式のレプリケーション方法を使用します。 ドメインコントローラーは、ディレクトリの変更を2番目のドメインコントローラーに伝達します。このコントローラーは、すべてのドメインコントローラーが変更を受信するまで3番目のドメインコントローラーに通信します。 レプリケーションの待機時間の短縮とトラフィックの削減のバランスを最大限に高めるには、サイト間のレプリケーションと、サイト間で発生するレプリケーションを区別して、Active Directory レプリケーションを制御します。

サイト内では、レプリケーションは高速化のために最適化され、データの更新によってレプリケーションがトリガーされます。データは、データ圧縮に必要なオーバーヘッドなしで送信されます。 反対に、サイト間のレプリケーションは、ワイドエリアネットワーク (WAN) リンク経由の転送コストを最小限に抑えるために圧縮されます。 サイト間でレプリケーションが実行されると、各サイトのドメインごとに1つのドメインコントローラーが、ディレクトリの変更を収集して保存し、スケジュールされた時刻に別のサイトのドメインコントローラーに通信します。

## <a name="client-affinity"></a>クライアント アフィニティ
ドメインコントローラーは、サイト情報を使用して、最も近いサイト内に存在するドメインコントローラーについてクライアントとして Active Directory クライアントに通知します。 たとえば、シアトルサイトのクライアントがサイトの所属を知らず、アトランタサイトのドメインコントローラーに接続しているとします。 クライアントの IP アドレスに基づいて、アトランタのドメインコントローラーは、クライアントが実際にどのサイトからのものであるかを判断し、サイト情報をクライアントに送り返します。 また、ドメインコントローラーは、選択されたドメインコントローラーが最も近いものであるかどうかをクライアントに通知します。 クライアントは、アトランタのドメインコントローラーによって提供されたサイト情報をキャッシュし、サイト固有のサービス (SRV) リソースレコード (AD DS のドメインコントローラーを特定するために使用されるドメインネームシステム (DNS) リソースレコード) を照会して、同じサイト内のドメインコントローラーを検出します。

同じサイト内のドメインコントローラを見つけることにより、クライアントは WAN リンク経由の通信を回避します。 ドメインコントローラがクライアントサイトに存在しない場合は、他の接続されたサイトに対するコスト接続が最も低いドメインコントローラが自己アドバタイズします (DNS にサイト固有のサービス (SRV) リソースレコードを登録します)。 DNS で公開されているドメインコントローラーは、サイトトポロジによって定義されている最も近いサイトからのものです。 このプロセスにより、すべてのサイトで認証用の優先ドメインコントローラーが使用されるようになります。

ドメインコントローラーを検索するプロセスの詳細については、「 [Active Directory Collection](/previous-versions/windows/it-pro/windows-server-2003/cc780036(v=ws.10))」を参照してください。

## <a name="sysvol-replication"></a>SYSVOL レプリケーション
SYSVOL は、ドメイン内の各ドメインコントローラー上に存在する、ファイルシステム内のフォルダーのコレクションです。 SYSVOL フォルダーは、ドメイン全体にレプリケートする必要があるファイルの既定の Active Directory の場所を提供します。これには、グループポリシーオブジェクト (Gpo)、スタートアップとシャットダウンのスクリプト、およびログオンとログオフのスクリプトが含まれます。  Windows Server 2008 では、ファイルレプリケーションサービス (FRS) または分散ファイルシステムレプリケーション (DFSR) を使用して、SYSVOL フォルダーに加えられた変更を、あるドメインコントローラーから他のドメインコントローラーにレプリケートできます。 FRS および DFSR は、サイトトポロジの設計時に作成したスケジュールに従って、これらの変更をレプリケートします。

## <a name="dfsn"></a>DFSN
DFSN は、サイト情報を使用して、サイト内の要求されたデータをホストしているサーバーにクライアントを送信します。 DFSN がクライアントと同じサイト内にデータのコピーを見つけられない場合、DFSN は AD DS のサイト情報を使用して、クライアントに最も近い DFSN 共有データを持つファイルサーバーを特定します。

## <a name="service-location"></a>サービスの場所
AD DS のファイルサービスや印刷サービスなどのサービスを公開することにより、Active Directory クライアントは、同じサイト内または最も近いサイト内で要求されたサービスを見つけることができます。 印刷サービスでは、AD DS に格納されている場所の属性を使用して、ユーザーが正確な場所を知らなくても場所でプリンターを参照できるようにします。 プリントサーバーの設計と展開の詳細については、「[プリントサーバーの設計と展開](/previous-versions/windows/it-pro/windows-server-2003/cc785842(v=ws.10))」を参照してください。
