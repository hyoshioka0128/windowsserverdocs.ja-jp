---
ms.assetid: 53ee93e2-09ea-4f8b-adb7-c24c59f055ea
title: AD FS での URI の使用
description: ''
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adfs
ms.openlocfilehash: 2ae91b16448c5acd61712332310544c1fd66789f
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 09/27/2019
ms.locfileid: "71385489"
---
# <a name="how-uris-are-used-in-ad-fs"></a>AD FS での URI の使用
Uniform Resource Identifier \(URI\)は、一意の識別子として使用される文字列です。  AD FS では、パートナー ネットワークのアドレスと構成オブジェクトの両方を識別するために URI を使用します。  パートナー ネットワーク アドレスの識別に使用されるときは、URI は常に URL です。  構成オブジェクトの識別に使用されるときは、URI は URN または URL の場合があります。  URI についての一般的な情報については、 [RFC 2396](https://go.microsoft.com/fwlink/?LinkId=48289) および [RFC 3986](https://go.microsoft.com/fwlink/?LinkId=90453)を参照してください。  
  
## <a name="uris-as-partner-network-addresses"></a>パートナー ネットワーク アドレスとしての URI  
以下は、AD FS で管理者がもっともよく処理するネットワーク アドレスの URL です。  
  
-   フェデレーションサービスの url (ws\-フェデレーション、SAML、ws-trust\-、フェデレーションメタデータ、ws\-ws-metadataexchange、プライバシー、組織の url を含む)  
  
-   証明書利用者信頼の url (ws-federation\-、SAML、フェデレーションメタデータ url を含む)  
  
-   要求プロバイダー信頼の url (ws-federation\-、SAML、フェデレーションメタデータ url を含む)  
  
## <a name="uris-as-object-identifiers"></a>オブジェクト識別子としての URI  
以下の表では、AD FS で管理者がもっともよく処理する ID について説明します。  
  
|識別子名|説明|比較|  
|-------------------|---------------|---------------|  
|フェデレーション サービスの識別子|この識別子は、フェデレーション サービスを識別するために使用されます。  このフェデレーション サービスからの要求を使用する証明書利用者、およびこのフェデレーション サービスに要求を発行する要求プロバイダーによって使用されます。|ユーザーがこのフェデレーション サービスの要求プロバイダーからの要求を要求するとき、フェデレーション サービス識別子が要求の対象を識別するために使用されます。<br /><br />このフェデレーション サービスが要求プロバイダーからの要求を受信するとき、フェデレーション サービス識別子を調べることで要求のスコープ設定を確認します。<br /><br />証明書利用者がこのフェデレーション サービスからの要求を受信するとき、証明書利用者は、要求の発行者がフェデレーション サービスの識別子と一致することを確認します。|  
|証明書利用者の識別子|この識別子は、このフェデレーション サービスに対して証明書利用者を識別するために使用されます。  証明書利用者に要求を発行する際に使用されます。|ユーザーがこのフェデレーション サービスから証明書利用者の要求を要求するときは、証明書利用者の識別子が要求の対象の証明書利用者を識別するために使用されます。  この比較を行う\(には、以下\)を参照してください。<br /><br />証明書利用者は要求を受信すると、セキュリティ トークン内の ID を調べて要求が自分宛であることを確認します。|  
|要求プロバイダー識別子|この識別子は、このフェデレーション サービスに対する証明書利用者を識別するために使用されます。  要求プロバイダーから要求を受信するときに使用されます。|このフェデレーション サービスが要求プロバイダーから要求を受信するとき、このフェデレーション サービスは、要求の発行者が要求プロバイダーの識別子と一致することを確認します。|  
|要求の種類|この識別子は、要求の種類を定義するために使用されます。  このフェデレーション サービス、要求プロバイダー、および証明書利用者によって要求を送受信するときに使用されます。|フェデレーション サービスが要求プロバイダーから要求を受け取るとき、対応する要求プロバイダー信頼に関連付けられている要求規則により、管理者は要求の種類を比較して、要求を処理できます。  証明書利用者信頼に関連付けられている要求規則によっても、管理者は要求プロバイダー信頼規則からの要求から要求の種類を比較して、発行する要求を決定できます。|  
  
## <a name="uri-prefix-matching-for-relying-party-identifiers"></a>証明書利用者の識別子と一致する URI プレフィックス  
URI のパス構文は階層的に編成され、すべて "\/" 文字またはすべて ":" 文字で区切られます。  したがって、パスは区切り文字に基づいてパス セクションに分割される場合があります。  プレフィックスが一致する場合、各セクションは照合規則\(に従って完全一致である必要があります。これらの規則は一致\)の大文字と小文字の区別を制御します。 照合ルールの詳細については、前述の RFC を参照してください。  
  
証明書利用者がフェデレーション サービスへの要求で識別されたとき、AD FS は、プレフィックス一致ロジックを使用して、AD FS 構成データベースに一致する証明書利用者の信頼があるかどうかを判断します。  
  
たとえば、AD FS 構成\(データベース URI1\)の証明書利用者識別子が受信要求\(URI2\)の証明書利用者識別子のプレフィックスである場合、次の条件を満たす必要があります。  
  
-   末尾の\(区切り記号スラッシュ\)とパスセクションまたは機関のコロンは無視する必要があります  
  
-   URI1 と URI2 のスキームと機関の部分は大文字と小文字が正確に一致する必要があります。  
  
-   URI1 の各パスセクションは、URI2 の対応\(するパスセクションに対して\)選択された大文字と小文字の区別に基づいて完全に一致する必要があります。  
  
-   URI2 には URI1 より多くのパス セクションがあってもかまいませんが、URI1 に URI2 より多くのパス セクションがあってはなりません。  
  
-   URI1 は、URI2 より多くのパス セクションを持つことはできません。  
  
-   URI1 にクエリ文字列がある場合、URI2 のクエリ文字列と正確に一致する必要があります。  
  
-   URI1 にフラグメントがある場合、URI2 のフラグメントと正確に一致する必要があります。  
  
次の表にその他の例を示します。  
  
|AD FS 構成データベース内の証明書利用者識別子|要求メッセージ内の証明書利用者識別子|要求の識別子と構成の識別子は一致するか|Reason|  
|------------------------------------------------------------|-----------------------------------------------|------------------------------------------------------------|----------|  
|http:\/\/contoso.com|http:\/\/contoso.com|true|完全一致|  
|http:\/\/contoso.com\/|http:\/\/contoso.com|true|末尾のスラッシュは無視されます|  
|http:\/\/contoso.com|http:\/\/contoso.com\/|true|末尾のスラッシュは無視されます|  
|http:\/\/contoso.com|http:\/\/contoso.comhr\/|true|URI1 にパスはなく、スキームと機関を URI2 に一致させます|  
|http:\/\/contoso.comhr\/|http:\/\/contoso.comhr\/web\/|true|最初のパス セクションが一致し、URI1 には 2 番目のパス セクションがありません|  
|http:\/\/contoso.comhr\/|http:\/\/contoso.comhr\/web\/?m\=t\/|true|上記と同じ理由で、クエリ文字列では何も変更されません。|  
|http:\/\/contoso.comhr\/\/|http:\/\/contoso.com\/hrw\/main|false|URI1 のパス セクション 1 は、URI2 のパス セクション 1 と一致しません|  
|http:\/\/contoso.comhr\/|http:\/\/contoso.com|false|URI1 には、URI2 より多くのパス セクションがあります|  
|http:\/\/contoso.comhr\/|http:\/\/contoso.com\/hrweb|false|最初のパス セクションが一致しません|  
|http:\/\/contoso.com?\/mt\=|http:\/\/contoso.com?\/mf\=|false|クエリ文字列の部分が一致しません|  
|https:\/\/contoso.com|http:\/\/contoso.com|false|スキーム部分が一致しません|  
|http:\/\/sts.contoso.com|http:\/\/contoso.com|false|機関部分が一致しません|  
|http:\/\/contoso.com|http:\/\/sts.contoso.com|false|機関部分が一致しません|  
  

