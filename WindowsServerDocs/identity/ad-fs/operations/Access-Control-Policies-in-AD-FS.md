---
ms.assetid: 102eeeb1-6c55-42a2-b321-71a7dab46146
title: AD FS のアクセス制御ポリシー
author: billmath
ms.author: billmath
manager: femila
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server
ms.technology: identity-adfs
ms.openlocfilehash: 6af511ac1aff488f192f75b31801c6fed751cedd
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/08/2020
ms.locfileid: "80859425"
---
# <a name="access-control-policies-in-windows-server-2016-ad-fs"></a>Windows Server 2016 AD FS のアクセス制御ポリシー

  
## <a name="access-control-policy-templates-in-ad-fs"></a>AD FS でのポリシーテンプレートの Access Control  
Active Directory フェデレーションサービス (AD FS) では、アクセス制御ポリシーテンプレートの使用がサポートされるようになりました。  管理者は、アクセス制御ポリシーテンプレートを使用して、ポリシーテンプレートを証明書利用者 (RPs) のグループに割り当てることにより、ポリシー設定を適用できます。 また、管理者はポリシーテンプレートを更新することもできます。ユーザーの介入が不要な場合は、変更が証明書利用者に自動的に適用されます。  
  
## <a name="what-are-access-control-policy-templates"></a>Access Control ポリシーテンプレートとは  
ポリシー処理の AD FS コアパイプラインには、認証、承認、要求の発行の3つのフェーズがあります。 現時点では、AD FS 管理者は、これらの各フェーズのポリシーを個別に構成する必要があります。  また、これらのポリシーの影響と、これらのポリシーに依存関係があるかどうかを理解する必要もあります。 また、管理者は、要求規則言語を理解し、カスタム規則を作成して、いくつかの単純/共通ポリシーを有効にする必要があります (例 外部アクセスをブロックします)。  
  
アクセス制御ポリシーテンプレートは、管理者が要求言語を使用して発行承認規則を構成する必要がある、この古いモデルに代わるものです。  発行承認規則の古い PowerShell コマンドレットは引き続き適用されますが、新しいモデルと相互に排他的です。 管理者は、新しいモデルと古いモデルのどちらを使用するかを選択できます。  新しいモデルを使用すると、管理者は、multi-factor authentication の適用など、アクセス権を付与するタイミングを制御できます。  
  
アクセス制御ポリシーテンプレートは、許可モデルを使用します。  つまり、既定では、どの人にもアクセスできず、アクセスを明示的に許可する必要があります。  ただし、これはまったく許可されているわけではありません。  管理者は、許可ルールに例外を追加できます。  たとえば、管理者は、このオプションを選択し、IP アドレスの範囲を指定することにより、特定のネットワークに基づいてアクセス権を付与することができます。  ただし、管理者によって例外が追加される場合があります。たとえば、管理者が特定のネットワークから例外を追加し、その IP アドレス範囲を指定する場合があります。  
  
![アクセス制御ポリシー](media/Access-Control-Policies-in-AD-FS/ADFSACP2.PNG)  
  
## <a name="built-in-access-control-policy-templates-vs-custom-access-control-policy-templates"></a>組み込みの access control ポリシーテンプレートとカスタムアクセス制御ポリシーテンプレート  
AD FS には、いくつかの組み込みアクセス制御ポリシーテンプレートが含まれています。  これらは、同じポリシー要件セットを持ついくつかの一般的なシナリオを対象としています。たとえば、Office 365 のクライアントアクセスポリシーです。  これらのテンプレートは変更できません。  
  
![アクセス制御ポリシー](media/Access-Control-Policies-in-AD-FS/ADFSACP3.PNG)  
  
ビジネスニーズに対応する柔軟性を高めるために、管理者は独自のアクセスポリシーテンプレートを作成できます。  これらは、作成後に変更できます。また、カスタムポリシーテンプレートの変更は、これらのポリシーテンプレートで制御されるすべての RPs に適用されます。  カスタムポリシーテンプレートを追加するには、[AD FS の管理] で [Access Control ポリシーの追加] をクリックします。  
  
ポリシーテンプレートを作成するには、管理者は最初に、要求にトークンの発行および委任が許可される条件を指定する必要があります。 条件とアクションのオプションを次の表に示します。   太字の条件は、管理者が異なる値または新しい値を使用してさらに構成できます。 また、管理者は例外を指定することもできます (存在する場合)。 条件が満たされると、例外が指定され、受信要求が例外で指定された条件と一致する場合、許可アクションはトリガーされません。  
  
|ユーザーを許可する|ば| 
| --- | --- | 
 |**特定**のネットワークから|**特定**のネットワークから<p>**特定**のグループから<p>**特定**の信頼レベルを持つデバイスから<p>要求内の**特定**の要求を含む|  
|**特定**のグループから|**特定**のネットワークから<p>**特定**のグループから<p>**特定**の信頼レベルを持つデバイスから<p>要求内の**特定**の要求を含む|  
|**特定**の信頼レベルを持つデバイスから|**特定**のネットワークから<p>**特定**のグループから<p>**特定**の信頼レベルを持つデバイスから<p>要求内の**特定**の要求を含む|  
|要求内の**特定**の要求を含む|**特定**のネットワークから<p>**特定**のグループから<p>**特定**の信頼レベルを持つデバイスから<p>要求内の**特定**の要求を含む|  
|および multi-factor authentication が必要です。|**特定**のネットワークから<p>**特定**のグループから<p>**特定**の信頼レベルを持つデバイスから<p>要求内の**特定**の要求を含む|  
  
管理者が複数の条件を選択した場合は、**と**の関係になります。 アクションは相互に排他的です。1つのポリシールールでは、1つのアクションのみを選択できます。 管理者が複数の例外を選択した場合は、**または**の関係になります。 いくつかのポリシー規則の例を次に示します。  
  
|**ポリシー**|**ポリシールール**|
| --- | --- |  
|エクストラネットアクセスには MFA が必要です<p>すべてのユーザーが許可されます。|**ルール #1**<p>**エクストラネット**から<p>および MFA を使用<p>許可<p>**規則2**<p>**イントラネット**から<p>許可|  
|外部アクセスは、FTE 以外の場合には許可されません<p>社内参加済みデバイスでの FTE に対するイントラネットアクセスが許可されます|**ルール #1**<p>**エクストラネット**から<p>および**FTE 以外**のグループから<p>許可<p>**ルール #2**<p>**イントラネット**から<p>**社内参加**済みデバイスから<p>および**FTE**グループから<p>許可|  
|エクストラネットアクセスは、"サービス管理者" 以外の MFA を必要とします。<p>すべてのユーザーにアクセスが許可されています|**ルール #1**<p>**エクストラネット**から<p>および MFA を使用<p>許可<p>(**サービス管理者グループ**を除く)<p>**ルール #2**<p>いつも<p>許可|  
|エクストラネットからの非ワークプレース参加済みデバイスへのアクセスには MFA が必要<p>イントラネットおよびエクストラネットへのアクセスに AD fabric を許可する|**ルール #1**<p>**イントラネット**から<p>**AD Fabric**グループから<p>許可<p>**ルール #2**<p>**エクストラネット**から<p>**ワークプレースに参加**していないデバイスから<p>**AD Fabric**グループから<p>および MFA を使用<p>許可<p>**ルール #3**<p>**エクストラネット**から<p>**社内参加**済みデバイスから<p>**AD Fabric**グループから<p>許可|  
  
## <a name="parameterized-policy-template-vs-non-parameterized-policy-template"></a>パラメーター化されたポリシーテンプレートとパラメーター化されていないポリシーテンプレート  
アクセス制御ポリシーは、  
  
パラメーター化されたポリシーテンプレートは、パラメーターを持つポリシーテンプレートです。 管理者は、このテンプレートを RPs.An に割り当てるときに、これらのパラメーターの値を入力する必要があります。管理者は、作成後にパラメーター化されたポリシーテンプレートを変更することはできません。  パラメーター化されたポリシーの例としては、組み込みのポリシーがあります。特定のグループを許可します。  このポリシーが RP に適用されるたびに、このパラメーターを指定する必要があります。  
  
![アクセス制御ポリシー](media/Access-Control-Policies-in-AD-FS/ADFSACP5.PNG)  
  
パラメーター化されていないポリシーテンプレートは、パラメーターを持たないポリシーテンプレートです。 管理者は、入力を必要とせずにこのテンプレートを RPs に割り当てることができ、作成後にパラメーター化されていないポリシーテンプレートに変更を加えることができます。  この例として、組み込みのポリシーがあります。すべてのユーザーを許可し、MFA を要求します。  
  
![アクセス制御ポリシー](media/Access-Control-Policies-in-AD-FS/ADFSACP4.PNG)  
  
## <a name="how-to-create-a-non-parameterized-access-control-policy"></a>パラメーター化されていないアクセス制御ポリシーを作成する方法  
パラメーター化されていないアクセス制御ポリシーを作成するには、次の手順を使用します。  
  
#### <a name="to-create-a-non-parameterized-access-control-policy"></a>パラメーター化されていないアクセス制御ポリシーを作成するには  
  
1.  左側の [AD FS の管理] で、[Access Control ポリシー] を選択し、右側の [Access Control ポリシーの追加] をクリックします。  
  
2.  名前と説明を入力します。  例: 認証されたデバイスを持つユーザーを許可します。  
  
3.  **[次のいずれかの規則に一致する場合にアクセスを許可する]** で、 **[追加]** をクリックします。  
  
4.  [許可] で、[**特定の信頼レベルを持つデバイス] の**横にあるチェックボックスをオンにします。  
  
5.  下部で、下線付きの**特定**のを選択します。  
  
6.  ポップアップウィンドウで、ドロップダウンから **[認証済み]** を選択します。  **[OK]** をクリックします。  
  
    ![アクセス制御ポリシー](media/Access-Control-Policies-in-AD-FS/ADFSACP6.PNG)  
  
7.  **[OK]** をクリックします。 **[OK]** をクリックします。  
  
    ![アクセス制御ポリシー](media/Access-Control-Policies-in-AD-FS/ADFSACP7.PNG)  
  
## <a name="how-to-create-a-parameterized-access-control-policy"></a>パラメーター化されたアクセス制御ポリシーを作成する方法  
パラメーター化されたアクセス制御ポリシーを作成するには、次の手順を使用します。  
  
#### <a name="to-create-a-parameterized-access-control-policy"></a>パラメーター化されたアクセス制御ポリシーを作成するには  
  
1.  左側の [AD FS の管理] で、[Access Control ポリシー] を選択し、右側の [Access Control ポリシーの追加] をクリックします。  
  
2.  名前と説明を入力します。  たとえば、特定の要求を持つユーザーを許可します。  
  
3.  **[次のいずれかの規則に一致する場合にアクセスを許可する]** で、 **[追加]** をクリックします。  
  
4.  許可 で、**要求に含まれる特定の要求** の横にあるチェックボックスをオンにします。  
  
5.  下部で、下線付きの**特定**のを選択します。  
  
6.  ポップアップ表示されたウィンドウから、**アクセス制御ポリシーが割り当てられたときに指定されたパラメーター**を選択します。  **[OK]** をクリックします。  
  
    ![アクセス制御ポリシー](media/Access-Control-Policies-in-AD-FS/ADFSACP8.PNG)  
  
7.  **[OK]** をクリックします。 **[OK]** をクリックします。  
  
    ![アクセス制御ポリシー](media/Access-Control-Policies-in-AD-FS/ADFSACP9.PNG)  
  
## <a name="how-to-create-a-custom-access-control-policy-with-an-exception"></a>例外を使用してカスタムアクセス制御ポリシーを作成する方法  
例外を使用してアクセス制御ポリシーを作成するには、次の手順を使用します。  
  
#### <a name="to-create-a-custom-access-control-policy-with-an-exception"></a>例外を使用してカスタムアクセス制御ポリシーを作成するには  
  
1.  左側の [AD FS の管理] で、[Access Control ポリシー] を選択し、右側の [Access Control ポリシーの追加] をクリックします。  
  
2.  名前と説明を入力します。  例: 認証されたデバイスを持つが、管理されていないユーザーを許可します。  
  
3.  **[次のいずれかの規則に一致する場合にアクセスを許可する]** で、 **[追加]** をクリックします。  
  
4.  [許可] で、[**特定の信頼レベルを持つデバイス] の**横にあるチェックボックスをオンにします。  
  
5.  下部で、下線付きの**特定**のを選択します。  
  
6.  ポップアップウィンドウで、ドロップダウンから **[認証済み]** を選択します。  **[OK]** をクリックします。  
  
7.  Except で、[**特定の信頼レベルを持つデバイス] の**横のチェックボックスをオンにします。  
  
8.  [除く] の下で、下線付きの**特定**のを選択します。  
  
9. ポップアップウィンドウで、ドロップダウンから **[管理]** を選択します。  **[OK]** をクリックします。  
  
10. **[OK]** をクリックします。 **[OK]** をクリックします。  
  
    ![アクセス制御ポリシー](media/Access-Control-Policies-in-AD-FS/ADFSACP10.PNG)  
  
## <a name="how-to-create-a-custom-access-control-policy-with-multiple-permit-conditions"></a>複数の許可条件を持つカスタムアクセス制御ポリシーを作成する方法  
複数の許可条件を持つアクセス制御ポリシーを作成するには、次の手順を使用します。  
  
#### <a name="to-create-a-parameterized-access-control-policy"></a>パラメーター化されたアクセス制御ポリシーを作成するには  
  
1.  左側の [AD FS の管理] で、[Access Control ポリシー] を選択し、右側の [Access Control ポリシーの追加] をクリックします。  
  
2.  名前と説明を入力します。  たとえば、特定のクレームと特定のグループからのユーザーを許可します。  
  
3.  **[次のいずれかの規則に一致する場合にアクセスを許可する]** で、 **[追加]** をクリックします。  
  
4.  許可 で、**特定のグループから** の横にあるチェックボックスをオンにし、**要求に特定**の要求を追加します。  
  
5.  下部の [グループ] の横にある最初の条件に対して、下線付きの**特定**のを選択します。  
  
6.  ポップアップ表示されたウィンドウから、**ポリシーの割り当て時に指定したパラメーター**を選択します。  **[OK]** をクリックします。  
  
7.  下部にある [要求] の横にある2番目の条件に対して、下線付きの**特定**のを選択します。  
  
8.  ポップアップ表示されたウィンドウから、**アクセス制御ポリシーが割り当てられたときに指定されたパラメーター**を選択します。  **[OK]** をクリックします。  
  
9. **[OK]** をクリックします。 **[OK]** をクリックします。  
  
![アクセス制御ポリシー](media/Access-Control-Policies-in-AD-FS/ADFSACP12.PNG)  
  
## <a name="how-to-assign-an-access-control-policy-to-a-new-application"></a>新しいアプリケーションにアクセス制御ポリシーを割り当てる方法  
新しいアプリケーションへのアクセス制御ポリシーの割り当ては非常に簡単であり、RP を追加するためにウィザードに統合されました。  証明書利用者信頼ウィザードから、割り当てたいアクセス制御ポリシーを選択できます。  これは、新しい証明書利用者信頼を作成するときに必要です。  
  
![アクセス制御ポリシー](media/Access-Control-Policies-in-AD-FS/ADFSACP13.PNG)  
  
## <a name="how-to-assign-an-access-control-policy-to-an-existing-application"></a>既存のアプリケーションにアクセス制御ポリシーを割り当てる方法  
既存のアプリケーションにアクセス制御ポリシーを割り当てるだけで、証明書利用者信頼からアプリケーションを選択し、右側の **[Access Control ポリシーの編集]** をクリックします。  
  
![アクセス制御ポリシー](media/Access-Control-Policies-in-AD-FS/ADFSACP14.PNG)  
  
ここからアクセス制御ポリシーを選択し、アプリケーションに適用できます。  
  
![アクセス制御ポリシー](media/Access-Control-Policies-in-AD-FS/ADFSACP15.PNG)  
  
## <a name="see-also"></a>参照  
[AD FS の運用](../../ad-fs/AD-FS-2016-Operations.md) 

